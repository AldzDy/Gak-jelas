
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPM Tools</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .payment-preview {
            max-width: 300px;
            margin: 0 auto;
        }
        .google-signin-button {
            background-color: #4285f4;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 10px 16px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        .google-signin-button:hover {
            background-color: #3367d6;
        }
        .feature-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .locked-feature {
            position: relative;
            overflow: hidden;
        }
        .locked-feature::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
        }
        .lock-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            color: white;
            z-index: 2;
        }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid white;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transition: all 0.3s ease;
            transform: translateX(120%);
        }
        .notification.show {
            transform: translateX(0);
        }
        .notification.success {
            background-color: #4caf50;
        }
        .notification.error {
            background-color: #f44336;
        }
        .notification.info {
            background-color: #2196f3;
        }
        .transaction-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .transaction-item:last-child {
            border-bottom: none;
        }
        .transaction-amount.positive {
            color: #4caf50;
        }
        .transaction-amount.negative {
            color: #f44336;
        }
        .refresh-button {
            background-color: #2196f3;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 12px;
            transition: background-color 0.3s;
        }
        .refresh-button:hover {
            background-color: #0d8aee;
        }
        .product-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }
        .product-image {
            height: 200px;
            background-color: #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .product-details {
            padding: 20px;
        }
        .product-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .product-description {
            color: #6b7280;
            margin-bottom: 16px;
        }
        .product-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #3b82f6;
            margin-bottom: 16px;
        }
        .product-button {
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 20px;
            border-radius: 12px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,165.3C384,171,480,149,576,138.7C672,128,768,128,864,149.3C960,171,1056,213,1152,213.3C1248,213,1344,171,1392,149.3L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
            background-size: cover;
        }
        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        .stats-container {
            display: flex;
            justify-content: space-around;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        .stat-item {
            text-align: center;
            margin: 10px;
            flex: 1;
            min-width: 150px;
        }
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .testimonial-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .testimonial-text {
            font-style: italic;
            margin-bottom: 15px;
        }
        .testimonial-author {
            display: flex;
            align-items: center;
        }
        .testimonial-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            background-color: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .testimonial-name {
            font-weight: 600;
        }
        .testimonial-role {
            font-size: 0.8rem;
            color: #718096;
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        .countdown-timer {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            display: inline-block;
        }
        .countdown-label {
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        .countdown-time {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        /* Tab Bar Styles */
        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
        }
        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 5px;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
            max-width: 80px;
        }
        .tab-item:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        .tab-item.active {
            color: #4299e1;
        }
        .tab-icon {
            font-size: 1.5rem;
            margin-bottom: 4px;
        }
        .tab-label {
            font-size: 0.7rem;
            text-align: center;
        }
        .main-content {
            padding: 20px;
            padding-bottom: 80px; /* Space for tab bar */
        }
        .header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 50;
        }
        .logo-container {
            display: flex;
            align-items: center;
        }
        .logo {
            width: 40px;
            height: 40px;
            background-color: #4299e1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }
        .logo-text {
            font-size: 1.2rem;
            font-weight: bold;
        }
        .user-menu {
            display: flex;
            align-items: center;
        }
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            cursor: pointer;
        }
        .user-balance {
            background-color: #4299e1;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 200px;
            z-index: 100;
            overflow: hidden;
        }
        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
        }
        .dropdown-item:hover {
            background-color: #f7fafc;
        }
        .dropdown-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        .dropdown-divider {
            height: 1px;
            background-color: #e2e8f0;
            margin: 4px 0;
        }
        .page-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2d3748;
        }
        .badge {
            background-color: #f56565;
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 0.7rem;
            position: absolute;
            top: -5px;
            right: -5px;
        }
        .buy-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
            padding: 12px 24px;
            border-radius: 30px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
        }
        .buy-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        .buy-button:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .price-tag {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        .price-amount {
            font-size: 1.5rem;
            font-weight: 700;
            color: #3b82f6;
        }
        .price-info {
            font-size: 0.8rem;
            color: #718096;
            background-color: #f7fafc;
            padding: 4px 8px;
            border-radius: 4px;
        }
        .unlock-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
        }
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #e2e8f0;
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress {
            height: 100%;
            background-color: #4299e1;
            transition: width 0.3s ease;
        }
        .unlock-status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        .unlock-status.success {
            background-color: #c6f6d5;
            color: #22543d;
        }
        .unlock-status.error {
            background-color: #fed7d7;
            color: #742a2a;
        }
        .unlock-status.info {
            background-color: #bee3f8;
            color: #2c5282;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-label {
            display: block;
            font-weight: 500;
            margin-bottom: 5px;
        }
        .form-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #d2d6dc;
            border-radius: 4px;
            font-size: 1rem;
        }
        .form-input:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }
        .form-button {
            background-color: #4299e1;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .form-button:hover {
            background-color: #3182ce;
        }
        .form-button:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
        }
        .unlock-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .unlock-card h3 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .unlock-card p {
            margin-bottom: 15px;
            opacity: 0.9;
        }
        .unlock-button {
            background-color: white;
            color: #f5576c;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .unlock-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .unlock-button:disabled {
            background-color: #e2e8f0;
            color: #a0aec0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .special-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: bold;
            text-transform: uppercase;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }
        .engine-params {
            margin-top: 20px;
        }
        .param-group {
            margin-bottom: 15px;
        }
        .param-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .param-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .param-row {
            display: flex;
            gap: 15px;
        }
        .param-col {
            flex: 1;
        }
        
        /* Steering Angle Styles */
        .steering-visual {
            width: 100px;
            height: 100px;
            margin: 0 auto 15px;
            position: relative;
        }
        .steering-wheel {
            width: 80px;
            height: 80px;
            border: 8px solid #333;
            border-radius: 50%;
            position: relative;
            transition: transform 0.5s ease;
        }
        .steering-mark {
            position: absolute;
            width: 4px;
            height: 20px;
            background-color: #e74c3c;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
        }
        .angle-40 .steering-wheel { transform: rotate(40deg); }
        .angle-60 .steering-wheel { transform: rotate(60deg); }
        .angle-90 .steering-wheel { transform: rotate(90deg); }
        .angle-option {
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .angle-option:hover {
            border-color: var(--primary-color);
            background-color: #f0f8ff;
        }
        .angle-option.selected {
            border-color: var(--primary-color);
            background-color: #e6f3ff;
        }
        .angle-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        .angle-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .angle-description {
            color: #666;
            font-size: 0.9rem;
        }
        
        /* Body Kit Styles */
        .bodykit-preview {
            display: flex;
            justify-content: center;
            margin: 15px 0;
        }
        .bodykit-image {
            width: 150px;
            height: 100px;
            background-color: #f3f4f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .bodykit-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        .bodykit-option {
            flex: 1;
            min-width: 120px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .bodykit-option:hover {
            border-color: #4299e1;
            background-color: #f0f8ff;
        }
        .bodykit-option.selected {
            border-color: #4299e1;
            background-color: #e6f3ff;
        }
        .bodykit-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
            color: #4299e1;
        }
        .bodykit-name {
            font-weight: bold;
            font-size: 0.9rem;
        }
        .car-count {
            background-color: #f7fafc;
            border-radius: 8px;
            padding: 10px;
            margin: 15px 0;
            text-align: center;
        }
        .car-count-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4299e1;
        }
        .car-count-text {
            font-size: 0.9rem;
            color: #718096;
        }
        
        /* Chrome Body Styles */
        .chrome-preview {
            display: flex;
            justify-content: center;
            margin: 15px 0;
        }
        .chrome-image {
            width: 150px;
            height: 100px;
            background-color: #f3f4f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .chrome-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        .chrome-option {
            flex: 1;
            min-width: 120px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .chrome-option:hover {
            border-color: #4299e1;
            background-color: #f0f8ff;
        }
        .chrome-option.selected {
            border-color: #4299e1;
            background-color: #e6f3ff;
        }
        .chrome-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
            color: #4299e1;
        }
        .chrome-name {
            font-weight: bold;
            font-size: 0.9rem;
        }
        .chrome-value-display {
            background-color: #f7fafc;
            border-radius: 8px;
            padding: 10px;
            margin: 15px 0;
            text-align: center;
        }
        .chrome-value-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4299e1;
        }
        .chrome-value-text {
            font-size: 0.9rem;
            color: #718096;
        }
        .chrome-slider {
            width: 100%;
            margin: 15px 0;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div id="notification" class="notification"></div>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================================
        // KONFIGURASI APLIKASI - GANTI NILAI SESUAI KEBUTUHAN
        // ==========================================================
        
        // 1. Konfigurasi API
        // ==========================================================
        const API_BASE_URL = 'https://espostory.my.id/projects/api.php'; // URL API backend Anda
        const API2_BASE_URL = 'https://espostory.my.id/projects/api2.php'; // URL API2 backend Anda

        // 2. Konfigurasi Aplikasi
        // ==========================================================
        const MIN_BALANCE_FOR_CPM = 0; // Minimal saldo untuk mengakses fitur CPM
        const UNLOCK_ALL_CARS_PRICE = 0; // Harga untuk unlock all cars
        const UNLOCK_POLICE_PRICE = 0; // Harga untuk unlock police
        const COSTUME_ENGINE_PRICE = 0; // Harga untuk costume engine
        const COSTUME_STEERING_PRICE = 0; // Harga untuk costume steering
        const UNLOCK_BODYKIT_PRICE = 0; // Harga untuk unlock body kit
        const CHROME_BODY_PRICE = 0; // Harga untuk chrome body
        const APP_NAME = 'ðŸ›’ ESPO STORE'; // Nama aplikasi
        const CURRENCY = 'Rp'; // Simbol mata uang

        // ==========================================================
        // AKHIR DARI KONFIGURASI - JANGAN UBAH KODE DI BAWAH INI
        // ==========================================================

        // Fungsi untuk menampilkan notifikasi
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Fungsi untuk melakukan request ke API
        async function apiRequest(endpoint, method = 'GET', data = null, isFormData = false, token = null, useApi2 = false) {
            const url = `${useApi2 ? API2_BASE_URL : API_BASE_URL}?endpoint=${endpoint}`;
            const options = {
                method,
                headers: {}
            };
            
            if (token) {
                options.headers.Authorization = `Bearer ${token}`;
            }
            
            if (data) {
                if (isFormData) {
                    options.body = data;
                } else {
                    options.headers['Content-Type'] = 'application/json';
                    options.body = JSON.stringify(data);
                }
            }
            
            try {
                const response = await fetch(url, options);
                const result = await response.json();
                
                if (!response.ok) {
                    throw new Error(result.error || 'Something went wrong');
                }
                
                return result;
            } catch (error) {
                console.error('API request error:', error);
                throw error;
            }
        }

        function App() {
            const [currentPage, setCurrentPage] = useState('home');
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [status, setStatus] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [cpmType, setCpmType] = useState('cpm1');
            
            // User authentication state
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [user, setUser] = useState(null);
            const [userBalance, setUserBalance] = useState(0);
            const [token, setToken] = useState(null);
            const [googleApiLoaded, setGoogleApiLoaded] = useState(false);
            const [isGoogleSigningIn, setIsGoogleSigningIn] = useState(false);
            
            // Transaction history state
            const [transactions, setTransactions] = useState([]);
            const [isLoadingTransactions, setIsLoadingTransactions] = useState(false);
            
            // Payment form states
            const [paymentName, setPaymentName] = useState('');
            const [paymentWhatsApp, setPaymentWhatsApp] = useState('');
            const [paymentEmail, setPaymentEmail] = useState('');
            const [paymentAmount, setPaymentAmount] = useState('');
            const [paymentProof, setPaymentProof] = useState(null);
            const [paymentProofPreview, setPaymentProofPreview] = useState('');
            
            // User menu state
            const [showUserMenu, setShowUserMenu] = useState(false);
            const userMenuRef = useRef(null);
            
            // === STATE UNTUK UNLOCK ALL CARS ===
            const [showUnlockModal, setShowUnlockModal] = useState(false);
            const [unlockProgress, setUnlockProgress] = useState(0);
            const [isUnlocking, setIsUnlocking] = useState(false);
            const [unlockStatus, setUnlockStatus] = useState('');
            const [unlockResult, setUnlockResult] = useState(null);
            const [unlockEmail, setUnlockEmail] = useState('');
            const [unlockPassword, setUnlockPassword] = useState('');

            // === STATE UNTUK UNLOCK POLICE ===
            const [showUnlockPoliceModal, setShowUnlockPoliceModal] = useState(false);
            const [unlockPoliceProgress, setUnlockPoliceProgress] = useState(0);
            const [isUnlockingPolice, setIsUnlockingPolice] = useState(false);
            const [unlockPoliceStatus, setUnlockPoliceStatus] = useState('');
            const [unlockPoliceResult, setUnlockPoliceResult] = useState(null);
            const [unlockPoliceEmail, setUnlockPoliceEmail] = useState('');
            const [unlockPolicePassword, setUnlockPolicePassword] = useState('');
            
            // === STATE UNTUK COSTUME ENGINE ===
            const [showCostumeEngineModal, setShowCostumeEngineModal] = useState(false);
            const [costumeEngineProgress, setCostumeEngineProgress] = useState(0);
            const [isCostumeEngineProcessing, setIsCostumeEngineProcessing] = useState(false);
            const [costumeEngineStatus, setCostumeEngineStatus] = useState('');
            const [costumeEngineResult, setCostumeEngineResult] = useState(null);
            const [costumeEngineEmail, setCostumeEngineEmail] = useState('');
            const [costumeEnginePassword, setCostumeEnginePassword] = useState('');
            
            // Costume engine parameters
            const [hp, setHp] = useState('1695');
            const [innerHp, setInnerHp] = useState('7000');
            const [nm, setNm] = useState('2245');
            const [innerNm, setInnerNm] = useState('3500');
            const [grip, setGrip] = useState('5');
            
            // === STATE UNTUK COSTUME STEERING ===
            const [showCostumeSteeringModal, setShowCostumeSteeringModal] = useState(false);
            const [costumeSteeringProgress, setCostumeSteeringProgress] = useState(0);
            const [isCostumeSteeringProcessing, setIsCostumeSteeringProcessing] = useState(false);
            const [costumeSteeringStatus, setCostumeSteeringStatus] = useState('');
            const [costumeSteeringResult, setCostumeSteeringResult] = useState(null);
            const [costumeSteeringEmail, setCostumeSteeringEmail] = useState('');
            const [costumeSteeringPassword, setCostumeSteeringPassword] = useState('');
            const [selectedSteeringAngle, setSelectedSteeringAngle] = useState(40);
            
            // === STATE UNTUK UNLOCK BODY KIT ===
            const [showBodyKitModal, setShowBodyKitModal] = useState(false);
            const [bodyKitProgress, setBodyKitProgress] = useState(0);
            const [isBodyKitProcessing, setIsBodyKitProcessing] = useState(false);
            const [bodyKitStatus, setBodyKitStatus] = useState('');
            const [bodyKitResult, setBodyKitResult] = useState(null);
            const [bodyKitEmail, setBodyKitEmail] = useState('');
            const [bodyKitPassword, setBodyKitPassword] = useState('');
            const [selectedBodyKitType, setSelectedBodyKitType] = useState('all');
            const [carCount, setCarCount] = useState(0);
            
            // === STATE UNTUK CHROME BODY ===
            const [showChromeBodyModal, setShowChromeBodyModal] = useState(false);
            const [chromeBodyProgress, setChromeBodyProgress] = useState(0);
            const [isChromeBodyProcessing, setIsChromeBodyProcessing] = useState(false);
            const [chromeBodyStatus, setChromeBodyStatus] = useState('');
            const [chromeBodyResult, setChromeBodyResult] = useState(null);
            const [chromeBodyEmail, setChromeBodyEmail] = useState('');
            const [chromeBodyPassword, setChromeBodyPassword] = useState('');
            const [chromeValue, setChromeValue] = useState(2.0);
            const [selectedChromeOption, setSelectedChromeOption] = useState('both');
            const [chromeIndex1, setChromeIndex1] = useState(21);
            const [chromeIndex2, setChromeIndex2] = useState(22);
            
            // Real-time data states
            const [activeUsers, setActiveUsers] = useState(0);
            const [totalTransactions, setTotalTransactions] = useState(0);
            const [happyCustomers, setHappyCustomers] = useState(0);
            const [countdown, setCountdown] = useState({ hours: 0, minutes: 0, seconds: 0 });
            const [currentTime, setCurrentTime] = useState(new Date());

            // Close user menu when clicking outside
            useEffect(() => {
                function handleClickOutside(event) {
                    if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {
                        setShowUserMenu(false);
                    }
                }
                
                document.addEventListener("mousedown", handleClickOutside);
                return () => {
                    document.removeEventListener("mousedown", handleClickOutside);
                };
            }, [userMenuRef]);

            // Check if user is logged in on app load
            useEffect(() => {
                const savedUser = localStorage.getItem('user');
                const savedToken = localStorage.getItem('token');
                
                if (savedUser && savedToken) {
                    setUser(JSON.parse(savedUser));
                    setToken(savedToken);
                    setIsLoggedIn(true);
                    
                    // Get user balance from API
                    fetchUserBalance(savedToken);
                }
                
                // Initialize Google API
                initializeGoogleAPI();
                
                // Simulate real-time data updates
                const interval = setInterval(() => {
                    setActiveUsers(prev => prev + Math.floor(Math.random() * 5) - 2);
                    setTotalTransactions(prev => prev + Math.floor(Math.random() * 3));
                    setHappyCustomers(prev => prev + Math.floor(Math.random() * 2));
                    setCurrentTime(new Date());
                }, 5000);
                
                // Set countdown timer (24 hours from now)
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                tomorrow.setHours(0, 0, 0, 0);
                
                const countdownInterval = setInterval(() => {
                    const now = new Date();
                    const difference = tomorrow - now;
                    
                    if (difference > 0) {
                        const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
                        const seconds = Math.floor((difference % (1000 * 60)) / 1000);
                        
                        setCountdown({ hours, minutes, seconds });
                    } else {
                        const nextDay = new Date();
                        nextDay.setDate(nextDay.getDate() + 1);
                        nextDay.setHours(0, 0, 0, 0);
                    }
                }, 1000);
                
                setActiveUsers(127);
                setTotalTransactions(843);
                setHappyCustomers(521);
                
                return () => {
                    clearInterval(interval);
                    clearInterval(countdownInterval);
                };
            }, []);

            const fetchUserBalance = async (authToken) => {
                try {
                    const result = await apiRequest('user-balance', 'GET', null, false, authToken);
                    if (result.success) {
                        setUserBalance(result.balance);
                        localStorage.setItem('userBalance', result.balance.toString());
                    }
                } catch (error) {
                    console.error('Failed to fetch user balance:', error);
                }
            };

            const fetchUserTransactions = async (authToken) => {
                setIsLoadingTransactions(true);
                try {
                    const result = await apiRequest('user-transactions', 'GET', null, false, authToken);
                    if (result.success) {
                        setTransactions(result.transactions);
                    } else {
                        showNotification(result.error || 'Gagal memuat riwayat transaksi', 'error');
                    }
                } catch (error) {
                    console.error('Load Transactions Error:', error);
                    showNotification('Tidak dapat terhubung ke server. Periksa koneksi internet Anda.', 'error');
                } finally {
                    setIsLoadingTransactions(false);
                }
            };

            const initializeGoogleAPI = () => {
                const script = document.createElement('script');
                script.src = 'https://accounts.google.com/gsi/client';
                script.onload = () => {
                    try {
                        window.google.accounts.id.initialize({
                            client_id: '490669700883-1f4dnfk5634js6e0ne1cdp6tii1n92d7.apps.googleusercontent.com',
                            callback: handleGoogleSignInResponse,
                            auto_select: false,
                            cancel_on_tap_outside: true
                        });
                        setGoogleApiLoaded(true);
                    } catch (error) {
                        showNotification('Gagal memuat layanan Google. Silakan refresh halaman.', 'error');
                    }
                };
                script.onerror = () => {
                    showNotification('Gagal memuat layanan Google. Periksa koneksi internet Anda.', 'error');
                };
                document.body.appendChild(script);
            };

            const handleGoogleSignIn = () => {
                if (!googleApiLoaded) {
                    showNotification('Layanan Google sedang dimuat. Silakan coba lagi dalam beberapa saat.', 'info');
                    return;
                }
                
                setIsGoogleSigningIn(true);
                setStatus('Menghubungkan ke Google...');
                
                try {
                    window.google.accounts.id.prompt((notification) => {
                        if (notification.isNotDisplayed() || notification.isSkippedMoment()) {
                            window.google.accounts.id.renderButton(
                                document.getElementById("google-signin-button"),
                                { theme: "outline", size: "large", text: "signin_with", shape: "rectangular" }
                            );
                        }
                    });
                } catch (error) {
                    showNotification('Terjadi kesalahan saat mencoba login dengan Google', 'error');
                    setIsGoogleSigningIn(false);
                }
            };

            const handleGoogleSignInResponse = async (response) => {
                try {
                    const payload = JSON.parse(atob(response.credential.split('.')[1]));
                    const userData = { id: payload.sub, name: payload.name, email: payload.email, imageUrl: payload.picture };
                    const result = await apiRequest('google-login', 'POST', userData);
                    
                    if (result.success) {
                        setUser(result.user);
                        setToken(result.token);
                        setIsLoggedIn(true);
                        setUserBalance(result.user.balance);
                        
                        localStorage.setItem('user', JSON.stringify(result.user));
                        localStorage.setItem('token', result.token);
                        localStorage.setItem('userBalance', result.user.balance.toString());
                        
                        showNotification('Login berhasil!', 'success');
                        setIsGoogleSigningIn(false);
                        
                        setTimeout(() => {
                            setCurrentPage('dashboard');
                            setStatus('');
                        }, 1000);
                    } else {
                        throw new Error(result.error || 'Login failed');
                    }
                } catch (error) {
                    showNotification(`Login gagal: ${error.message || 'Terjadi kesalahan saat memproses login Google'}`, 'error');
                    setIsGoogleSigningIn(false);
                }
            };

            const handleSignOut = () => {
                if (window.google && window.google.accounts) {
                    window.google.accounts.id.disableAutoSelect();
                }
                
                setUser(null);
                setToken(null);
                setIsLoggedIn(false);
                localStorage.removeItem('user');
                localStorage.removeItem('token');
                setCurrentPage('home');
                showNotification('Anda telah keluar', 'info');
            };

            const handleCPM1Click = () => {
                if (!isLoggedIn) {
                    showNotification('Silakan login terlebih dahulu', 'error');
                    setCurrentPage('login');
                    return;
                }
                
                if (userBalance < MIN_BALANCE_FOR_CPM) {
                    showNotification(`Saldo Anda tidak mencukupi. Minimal saldo ${CURRENCY} ${MIN_BALANCE_FOR_CPM.toLocaleString('id-ID')} untuk mengakses fitur ini.`, 'error');
                    setCurrentPage('payment');
                    return;
                }
                
                setCpmType('cpm1');
                setCurrentPage('cpm-login');
            };

            const handleCPM2Click = () => {
                if (!isLoggedIn) {
                    showNotification('Silakan login terlebih dahulu', 'error');
                    setCurrentPage('login');
                    return;
                }
                
                if (userBalance < MIN_BALANCE_FOR_CPM) {
                    showNotification(`Saldo Anda tidak mencukupi. Minimal saldo ${CURRENCY} ${MIN_BALANCE_FOR_CPM.toLocaleString('id-ID')} untuk mengakses fitur ini.`, 'error');
                    setCurrentPage('payment');
                    return;
                }
                
                setCpmType('cpm2');
                setCurrentPage('cpm-login');
            };

            const handleUnlockAllCars = () => {
                
                if (userBalance < UNLOCK_ALL_CARS_PRICE) {
                    showNotification(`Saldo Anda tidak mencukupi. Minimal saldo ${CURRENCY} ${UNLOCK_ALL_CARS_PRICE.toLocaleString('id-ID')} untuk mengakses fitur ini.`, 'error');
                    setCurrentPage('payment');
                    return;
                }
                
                setShowUnlockModal(true);
                setUnlockProgress(0);
                setUnlockStatus('');
                setUnlockResult(null);
                setUnlockEmail('');
                setUnlockPassword('');
            };

            const useCPMService = async (email, password) => {
                setIsLoading(true);
                setStatus('Memproses layanan CPM...');
                
                try {
                    const result = await apiRequest('use-cpm-service', 'POST', {
                        email,
                        password,
                        cpm_type: cpmType
                    }, false, token);
                    
                    if (result.success) {
                        setStatus('Layanan CPM berhasil digunakan!');
                        setUserBalance(result.new_balance);
                        localStorage.setItem('userBalance', result.new_balance.toString());
                        
                        showNotification(`Layanan CPM berhasil digunakan! Saldo Anda sekarang: ${CURRENCY} ${result.new_balance.toLocaleString('id-ID')}`, 'success');
                        
                        setTimeout(() => {
                            setCurrentPage('dashboard');
                            setStatus('');
                        }, 2000);
                    } else {
                        throw new Error(result.error || 'Failed to use CPM service');
                    }
                } catch (error) {
                    setStatus(`Gagal menggunakan layanan CPM: ${error.message}`);
                    showNotification(`Gagal menggunakan layanan CPM: ${error.message}`, 'error');
                } finally {
                    setIsLoading(false);
                }
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                await useCPMService(email, password);
            };

            const handleUnlockSubmit = async (e) => {
                e.preventDefault();
                setIsUnlocking(true);
                setUnlockProgress(10);
                setUnlockStatus('Memproses login ke CPM...');
                
                try {
                    const progressInterval = setInterval(() => {
                        setUnlockProgress(prev => {
                            if (prev >= 90) {
                                clearInterval(progressInterval);
                                return 90;
                            }
                            return prev + 10;
                        });
                    }, 500);
                    
                    const result = await apiRequest('unlock-all-cars', 'POST', {
                        email: unlockEmail,
                        password: unlockPassword
                    }, false, token);
                    
                    clearInterval(progressInterval);
                    setUnlockProgress(100);
                    
                    if (result.success) {
                        setUnlockStatus('Semua mobil berhasil dibuka! Silakan restart game untuk melihat perubahan.');
                        setUserBalance(result.new_balance);
                        localStorage.setItem('userBalance', result.new_balance.toString());
                        
                        showNotification(`Semua mobil berhasil dibuka! Saldo Anda sekarang: ${CURRENCY} ${result.new_balance.toLocaleString('id-ID')}`, 'success');
                        
                        setTimeout(() => {
                            setShowUnlockModal(false);
                            setUnlockProgress(0);
                            setUnlockStatus('');
                            setUnlockResult(result);
                        }, 3000);
                    } else {
                        throw new Error(result.error || 'Failed to unlock cars');
                    }
                } catch (error) {
                    setUnlockStatus(`Gagal membuka mobil: ${error.message}`);
                    showNotification(`Gagal membuka mobil: ${error.message}`, 'error');
                } finally {
                    setIsUnlocking(false);
                }
            };

            const handleUnlockPoliceSubmit = async (e) => {
                e.preventDefault();
                setIsUnlockingPolice(true);
                setUnlockPoliceProgress(10);
                setUnlockPoliceStatus('Memproses login ke CPM...');
                
                try {
                    const progressInterval = setInterval(() => {
                        setUnlockPoliceProgress(prev => {
                            if (prev >= 90) {
                                clearInterval(progressInterval);
                                return 90;
                            }
                            return prev + 10;
                        });
                    }, 300);
                    
                    const result = await apiRequest('unlock-police', 'POST', {
                        email: unlockPoliceEmail,
                        password: unlockPolicePassword
                    }, false, token);
                    
                    clearInterval(progressInterval);
                    setUnlockPoliceProgress(100);
                    
                    if (result.success) {
                        setUnlockPoliceStatus('Fitur Police berhasil dibuka! Silakan restart game untuk melihat perubahan.');
                        setUserBalance(result.new_balance);
                        localStorage.setItem('userBalance', result.new_balance.toString());
                        
                        showNotification(`Fitur Police berhasil dibuka! Saldo Anda sekarang: ${CURRENCY} ${result.new_balance.toLocaleString('id-ID')}`, 'success');
                        
                        setTimeout(() => {
                            setShowUnlockPoliceModal(false);
                            setUnlockPoliceProgress(0);
                            setUnlockPoliceStatus('');
                            setUnlockPoliceResult(result);
                        }, 3000);
                    } else {
                        throw new Error(result.error || 'Failed to unlock police');
                    }
                } catch (error) {
                    setUnlockPoliceStatus(`Gagal membuka fitur Police: ${error.message}`);
                    showNotification(`Gagal membuka fitur Police: ${error.message}`, 'error');
                } finally {
                    setIsUnlockingPolice(false);
                }
            };

            const handleCostumeEngineSubmit = async (e) => {
                e.preventDefault();
                setIsCostumeEngineProcessing(true);
                setCostumeEngineProgress(10);
                setCostumeEngineStatus('Memproses login ke CPM...');
                
                try {
                    const progressInterval = setInterval(() => {
                        setCostumeEngineProgress(prev => {
                            if (prev >= 90) {
                                clearInterval(progressInterval);
                                return 90;
                            }
                            return prev + 10;
                        });
                    }, 300);
                    
                    const result = await apiRequest('costume-engine', 'POST', {
                        email: costumeEngineEmail,
                        password: costumeEnginePassword,
                        hp: hp,
                        innerHp: innerHp,
                        nm: nm,
                        innerNm: innerNm,
                        grip: grip
                    }, false, token);
                    
                    clearInterval(progressInterval);
                    setCostumeEngineProgress(100);
                    
                    if (result.success) {
                        setCostumeEngineStatus('Parameter mesin berhasil diterapkan! Silakan restart game untuk melihat perubahan.');
                        setUserBalance(result.new_balance);
                        localStorage.setItem('userBalance', result.new_balance.toString());
                        
                        showNotification(`Parameter mesin berhasil diterapkan! Saldo Anda sekarang: ${CURRENCY} ${result.new_balance.toLocaleString('id-ID')}`, 'success');
                        
                        setTimeout(() => {
                            setShowCostumeEngineModal(false);
                            setCostumeEngineProgress(0);
                            setCostumeEngineStatus('');
                            setCostumeEngineResult(result);
                        }, 3000);
                    } else {
                        throw new Error(result.error || 'Failed to apply costume engine');
                    }
                } catch (error) {
                    setCostumeEngineStatus(`Gagal menerapkan parameter mesin: ${error.message}`);
                    showNotification(`Gagal menerapkan parameter mesin: ${error.message}`, 'error');
                } finally {
                    setIsCostumeEngineProcessing(false);
                }
            };
            
            const handleCostumeSteeringSubmit = async (e) => {
                e.preventDefault();
                setIsCostumeSteeringProcessing(true);
                setCostumeSteeringProgress(10);
                setCostumeSteeringStatus('Memproses login ke CPM...');
                
                try {
                    const progressInterval = setInterval(() => {
                        setCostumeSteeringProgress(prev => {
                            if (prev >= 90) {
                                clearInterval(progressInterval);
                                return 90;
                            }
                            return prev + 10;
                        });
                    }, 300);
                    
                    const result = await apiRequest('costume-steering', 'POST', {
                        email: costumeSteeringEmail,
                        password: costumeSteeringPassword,
                        angle: selectedSteeringAngle
                    }, false, token);
                    
                    clearInterval(progressInterval);
                    setCostumeSteeringProgress(100);
                    
                    if (result.success) {
                        setCostumeSteeringStatus(`Sudut kemudi berhasil diubah menjadi ${selectedSteeringAngle}Â°! Silakan restart game untuk melihat perubahan.`);
                        setUserBalance(result.new_balance);
                        localStorage.setItem('userBalance', result.new_balance.toString());
                        
                        showNotification(`Sudut kemudi berhasil diubah menjadi ${selectedSteeringAngle}Â°! Saldo Anda sekarang: ${CURRENCY} ${result.new_balance.toLocaleString('id-ID')}`, 'success');
                        
                        setTimeout(() => {
                            setShowCostumeSteeringModal(false);
                            setCostumeSteeringProgress(0);
                            setCostumeSteeringStatus('');
                            setCostumeSteeringResult(result);
                        }, 3000);
                    } else {
                        throw new Error(result.error || 'Failed to apply costume steering');
                    }
                } catch (error) {
                    setCostumeSteeringStatus(`Gagal mengubah sudut kemudi: ${error.message}`);
                    showNotification(`Gagal mengubah sudut kemudi: ${error.message}`, 'error');
                } finally {
                    setIsCostumeSteeringProcessing(false);
                }
            };
            
            const handleBodyKitSubmit = async (e) => {
                e.preventDefault();
                setIsBodyKitProcessing(true);
                setBodyKitProgress(10);
                setBodyKitStatus('Memproses login ke CPM...');
                
                try {
                    const progressInterval = setInterval(() => {
                        setBodyKitProgress(prev => {
                            if (prev >= 90) {
                                clearInterval(progressInterval);
                                return 90;
                            }
                            return prev + 10;
                        });
                    }, 300);
                    
                    const result = await apiRequest('unlock-body-kit', 'POST', {
                        email: bodyKitEmail,
                        password: bodyKitPassword,
                        type: selectedBodyKitType
                    }, false, token);
                    
                    clearInterval(progressInterval);
                    setBodyKitProgress(100);
                    
                    if (result.success) {
                        setBodyKitStatus(`Body kit berhasil dibuka untuk ${result.success_count} mobil! Silakan restart game untuk melihat perubahan.`);
                        setUserBalance(result.new_balance);
                        localStorage.setItem('userBalance', result.new_balance.toString());
                        
                        showNotification(`Body kit berhasil dibuka untuk ${result.success_count} mobil! Saldo Anda sekarang: ${CURRENCY} ${result.new_balance.toLocaleString('id-ID')}`, 'success');
                        
                        setTimeout(() => {
                            setShowBodyKitModal(false);
                            setBodyKitProgress(0);
                            setBodyKitStatus('');
                            setBodyKitResult(result);
                        }, 3000);
                    } else {
                        throw new Error(result.error || 'Failed to unlock body kit');
                    }
                } catch (error) {
                    setBodyKitStatus(`Gagal membuka body kit: ${error.message}`);
                    showNotification(`Gagal membuka body kit: ${error.message}`, 'error');
                } finally {
                    setIsBodyKitProcessing(false);
                }
            };
            
            // === FUNGSI BARU UNTUK CHROME BODY ===
            const handleChromeBodySubmit = async (e) => {
                e.preventDefault();
                setIsChromeBodyProcessing(true);
                setChromeBodyProgress(10);
                setChromeBodyStatus('Memproses login ke CPM...');
                
                try {
                    const progressInterval = setInterval(() => {
                        setChromeBodyProgress(prev => {
                            if (prev >= 90) {
                                clearInterval(progressInterval);
                                return 90;
                            }
                            return prev + 10;
                        });
                    }, 300);
                    
                    // Menggunakan API2 untuk Chrome Body
                    const result = await apiRequest('chrome-body', 'POST', {
                        email: chromeBodyEmail,
                        password: chromeBodyPassword,
                        chromeValue: chromeValue,
                        chromeOption: selectedChromeOption,
                        chromeIndex1: chromeIndex1,
                        chromeIndex2: chromeIndex2
                    }, false, token, true);
                    
                    clearInterval(progressInterval);
                    setChromeBodyProgress(100);
                    
                    if (result.success) {
                        setChromeBodyStatus(`Chrome body berhasil diterapkan untuk ${result.success_count} mobil! Silakan restart game untuk melihat perubahan.`);
                        setUserBalance(result.new_balance);
                        localStorage.setItem('userBalance', result.new_balance.toString());
                        
                        showNotification(`Chrome body berhasil diterapkan untuk ${result.success_count} mobil! Saldo Anda sekarang: ${CURRENCY} ${result.new_balance.toLocaleString('id-ID')}`, 'success');
                        
                        setTimeout(() => {
                            setShowChromeBodyModal(false);
                            setChromeBodyProgress(0);
                            setChromeBodyStatus('');
                            setChromeBodyResult(result);
                        }, 3000);
                    } else {
                        throw new Error(result.error || 'Failed to apply chrome body');
                    }
                } catch (error) {
                    setChromeBodyStatus(`Gagal menerapkan chrome body: ${error.message}`);
                    showNotification(`Gagal menerapkan chrome body: ${error.message}`, 'error');
                } finally {
                    setIsChromeBodyProcessing(false);
                }
            };
            
            // === FUNGSI UNTUK MENGAMBIL JUMLAH MOBIL ===
            const fetchCarCount = async (email, password) => {
                try {
                    const result = await apiRequest('get-cars', 'POST', {
                        email,
                        password
                    }, false, token);
                    
                    if (result.success) {
                        setCarCount(result.cars ? result.cars.length : 0);
                        return result.cars ? result.cars.length : 0;
                    } else {
                        throw new Error(result.error || 'Failed to get cars');
                    }
                } catch (error) {
                    console.error('Failed to fetch car count:', error);
                    setCarCount(0);
                    return 0;
                }
            };

            const renderHeader = () => (
                <div className="header">
                    <div className="logo-container">
                        <div className="logo">
                            <i className="fas fa-store text-white"></i>
                        </div>
                        <div className="logo-text">{APP_NAME}</div>
                    </div>
                    
                    <div className="user-menu" ref={userMenuRef}>
                        {isLoggedIn ? (
                            <>
                                <div className="user-balance">
                                    {CURRENCY} {userBalance.toLocaleString('id-ID')}
                                </div>
                                <div className="user-avatar" onClick={() => setShowUserMenu(!showUserMenu)}>
                                    {user && user.imageUrl ? (
                                        <img src={user.imageUrl} alt="Profile" className="w-full h-full rounded-full" />
                                    ) : (
                                        <i className="fas fa-user text-gray-600"></i>
                                    )}
                                </div>
                                {showUserMenu && (
                                    <div className="dropdown-menu">
                                        <div className="dropdown-item" onClick={() => { setCurrentPage('dashboard'); setShowUserMenu(false); }}>
                                            <i className="fas fa-tachometer-alt"></i>
                                            <span>Dashboard</span>
                                        </div>
                                        <div className="dropdown-item" onClick={() => { 
                                            fetchUserTransactions(token); 
                                            setCurrentPage('transactions'); 
                                            setShowUserMenu(false); 
                                        }}>
                                            <i className="fas fa-history"></i>
                                            <span>Riwayat</span>
                                        </div>
                                        <div className="dropdown-item" onClick={() => { setCurrentPage('payment'); setShowUserMenu(false); }}>
                                            <i className="fas fa-wallet"></i>
                                            <span>Top Up</span>
                                        </div>
                                        <div className="dropdown-divider"></div>
                                        <div className="dropdown-item" onClick={handleSignOut}>
                                            <i className="fas fa-sign-out-alt"></i>
                                            <span>Keluar</span>
                                        </div>
                                    </div>
                                )}
                            </>
                        ) : (
                            <button 
                                onClick={handleGoogleSignIn}
                                className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-200"
                            >
                                {isGoogleSigningIn ? (
                                    <>
                                        <div className="loading-spinner inline-block mr-2"></div>
                                        Menghubungkan...
                                    </>
                                ) : (
                                    'Masuk'
                                )}
                            </button>
                        )}
                    </div>
                </div>
            );

            const renderTabBar = () => (
                <div className="tab-bar">
                    <div className={`tab-item ${currentPage === 'home' ? 'active' : ''}`} onClick={() => setCurrentPage('home')}>
                        <i className="fas fa-home tab-icon"></i>
                        <span className="tab-label">Beranda</span>
                    </div>
                    
                    <div className={`tab-item ${currentPage === 'store' ? 'active' : ''}`} onClick={() => setCurrentPage('store')}>
                        <i className="fas fa-store tab-icon"></i>
                        <span className="tab-label">Toko</span>
                    </div>
                    
                    <div className={`tab-item ${currentPage === 'notifications' ? 'active' : ''}`} onClick={() => setCurrentPage('notifications')}>
                        <i className="fas fa-bell tab-icon"></i>
                        <span className="tab-label">Notifikasi</span>
                        <div className="badge">3</div>
                    </div>
                    
                    {isLoggedIn ? (
                        <>
                            <div className={`tab-item ${currentPage === 'dashboard' ? 'active' : ''}`} onClick={() => setCurrentPage('dashboard')}>
                                <i className="fas fa-tachometer-alt tab-icon"></i>
                                <span className="tab-label">Dashboard</span>
                            </div>
                            
                            <div className={`tab-item ${currentPage === 'transactions' ? 'active' : ''}`} onClick={() => { 
                                fetchUserTransactions(token); 
                                setCurrentPage('transactions'); 
                            }}>
                                <i className="fas fa-history tab-icon"></i>
                                <span className="tab-label">Riwayat</span>
                            </div>
                        </>
                    ) : (
                        <div className={`tab-item ${currentPage === 'login' ? 'active' : ''}`} onClick={() => setCurrentPage('login')}>
                            <i className="fas fa-sign-in-alt tab-icon"></i>
                            <span className="tab-label">Masuk</span>
                        </div>
                    )}
                </div>
            );

            const renderHomePage = () => (
                <div>
                    {/* Hero Section */}
                    <div className="hero-section">
                        <div className="hero-content">
                            <h1 className="text-4xl md:text-5xl font-bold mb-4">Tingkatkan Engagement Anda dengan CPM Terbaik</h1>
                            <p className="text-xl mb-6 opacity-90">Solusi digital marketing yang efektif untuk meningkatkan visibilitas dan konversi bisnis Anda</p>
                            
                            <div className="countdown-timer">
                                <div className="countdown-label">Penawaran Spesial Berakhir Dalam:</div>
                                <div className="countdown-time">
                                    {String(countdown.hours).padStart(2, '0')}:{String(countdown.minutes).padStart(2, '0')}:{String(countdown.seconds).padStart(2, '0')}
                                </div>
                            </div>
                            
                            <div className="mt-8 flex flex-col sm:flex-row gap-4 justify-center">
                                <button 
                                    onClick={() => setCurrentPage('store')}
                                    className="bg-white text-purple-700 font-bold py-3 px-8 rounded-full hover:bg-gray-100 transition duration-300 transform hover:scale-105"
                                >
                                    Jelajahi Produk
                                </button>
                                {isLoggedIn ? (
                                    <button 
                                        onClick={() => setCurrentPage('dashboard')}
                                        className="bg-transparent border-2 border-white text-white font-bold py-3 px-8 rounded-full hover:bg-white hover:text-purple-700 transition duration-300"
                                    >
                                        Dashboard Saya
                                    </button>
                                ) : (
                                    <button 
                                        onClick={handleGoogleSignIn}
                                        className="bg-transparent border-2 border-white text-white font-bold py-3 px-8 rounded-full hover:bg-white hover:text-purple-700 transition duration-300"
                                    >
                                        {isGoogleSigningIn ? (
                                            <>
                                                <div className="loading-spinner inline-block mr-2"></div>
                                                Menghubungkan...
                                            </>
                                        ) : (
                                            'Masuk Sekarang'
                                        )}
                                    </button>
                                )}
                            </div>
                        </div>
                    </div>
                    
                    {/* Stats Section */}
                    <div className="bg-white rounded-lg shadow-md p-6 mb-8">
                        <h2 className="text-2xl font-bold text-center mb-6">Data Real-Time</h2>
                        <div className="stats-container">
                            <div className="stat-item">
                                <div className="stat-number text-blue-600">{activeUsers}</div>
                                <div className="stat-label">Pengguna Aktif</div>
                            </div>
                            <div className="stat-item">
                                <div className="stat-number text-green-600">{totalTransactions}</div>
                                <div className="stat-label">Transaksi Berhasil</div>
                            </div>
                            <div className="stat-item">
                                <div className="stat-number text-purple-600">{happyCustomers}</div>
                                <div className="stat-label">Pelanggan Puas</div>
                            </div>
                            <div className="stat-item">
                                <div className="stat-number text-orange-600">{currentTime.toLocaleTimeString('id-ID')}</div>
                                <div className="stat-label">Waktu Sekarang</div>
                            </div>
                        </div>
                    </div>
                    
                    {/* User Section */}
                    {isLoggedIn ? (
                        <div className="bg-white rounded-lg shadow-md p-6 mb-8">
                            <div className="flex items-center justify-center mb-4">
                                {user && user.imageUrl ? (
                                    <img src={user.imageUrl} alt="Profile" className="w-16 h-16 rounded-full" />
                                ) : (
                                    <div className="w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center">
                                        <i className="fas fa-user text-gray-600"></i>
                                    </div>
                                )}
                            </div>
                            <h2 className="text-xl font-semibold text-center mb-2">Selamat datang kembali, {user ? user.name : 'Pengguna'}!</h2>
                            <p className="text-gray-600 text-center mb-4">Saldo Anda: {CURRENCY} {userBalance.toLocaleString('id-ID')}</p>
                            <div className="flex flex-col sm:flex-row gap-4 justify-center">
                                <button 
                                    onClick={() => setCurrentPage('dashboard')}
                                    className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-200"
                                >
                                    Dashboard
                                </button>
                                <button 
                                    onClick={() => setCurrentPage('store')}
                                    className="bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-md transition duration-200"
                                >
                                    Belanja Sekarang
                                </button>
                            </div>
                        </div>
                    ) : (
                        <div className="bg-white rounded-lg shadow-md p-6 mb-8">
                            <h2 className="text-xl font-semibold text-center mb-4">Bergabunglah dengan Ribuan Pengguna Puas</h2>
                            <p className="text-gray-600 text-center mb-6">Dapatkan akses ke layanan CPM terbaik dengan harga terjangkau</p>
                            <div className="flex flex-col items-center">
                                <div id="google-signin-button" className="google-signin-button mb-2" onClick={handleGoogleSignIn}>
                                    {isGoogleSigningIn ? (
                                        <>
                                            <div className="loading-spinner"></div>
                                            <span>Menghubungkan...</span>
                                        </>
                                    ) : (
                                        <>
                                            <i className="fab fa-google"></i>
                                            <span>Masuk dengan Google</span>
                                        </>
                                    )}
                                </div>
                                {!googleApiLoaded && (
                                    <p className="text-sm text-gray-500 mt-2">
                                        <i className="fas fa-spinner fa-spin mr-1"></i>
                                        Memuat layanan Google...
                                    </p>
                                )}
                            </div>
                        </div>
                    )}
                    
                    {/* Features Section */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div className={`feature-card ${userBalance < MIN_BALANCE_FOR_CPM ? 'locked-feature' : ''} relative bg-white rounded-lg shadow-md p-6`}>
                            <div className="flex items-center mb-4">
                                <div className="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4">
                                    <i className="fas fa-gamepad text-blue-600 text-xl"></i>
                                </div>
                                <h3 className="text-xl font-semibold">KING CPM 1</h3>
                            </div>
                            <p className="text-gray-600 mb-4">Solusi CPM standar dengan performa tinggi untuk meningkatkan engagement konten Anda secara efektif.</p>
                            <div className="price-tag">
                                <span className="price-amount">{CURRENCY} {MIN_BALANCE_FOR_CPM.toLocaleString('id-ID')}</span>
                                <span className="price-info">Harga</span>
                            </div>
                            <button 
                                onClick={handleCPM1Click}
                                className="buy-button w-full"

                            </button>
                            {userBalance < MIN_BALANCE_FOR_CPM && (
                                <div className="lock-icon">
                                    <i className="fas fa-lock"></i>
                                </div>
                            )}
                        </div>
                        
                        <div className={`feature-card ${userBalance < MIN_BALANCE_FOR_CPM ? 'locked-feature' : ''} relative bg-white rounded-lg shadow-md p-6`}>
                            <div className="flex items-center mb-4">
                                <div className="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4">
                                    <i className="fas fa-gamepad text-green-600 text-xl"></i>
                                </div>
                                <h3 className="text-xl font-semibold">KING CPM 2</h3>
                            </div>
                            <p className="text-gray-600 mb-4">Solusi CPM premium dengan fitur lengkap untuk hasil maksimal dan konversi yang lebih tinggi.</p>
                            <div className="price-tag">
                                <span className="price-amount">{CURRENCY} {MIN_BALANCE_FOR_CPM.toLocaleString('id-ID')}</span>
                                <span className="price-info">Harga</span>
                            </div>
                            <button 
                                onClick={handleCPM2Click}
                                className="buy-button w-full"

                            </button>
                            {userBalance < MIN_BALANCE_FOR_CPM && (
                                <div className="lock-icon">
                                    <i className="fas fa-lock"></i>
                                </div>
                            )}
                        </div>
                    </div>
                    
                    {/* Testimonials Section */}
                    <div className="bg-white rounded-lg shadow-md p-6 mb-8">
                        <h2 className="text-2xl font-bold text-center mb-6">Apa Kata Pelanggan Kami</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div className="testimonial-card">
                                <div className="testimonial-text">
                                    "ESPO Store telah mengubah cara kami beriklan. Dengan CPM1, kami melihat peningkatan engagement hingga 300% dalam seminggu!"
                                </div>
                                <div className="testimonial-author">
                                    <div className="testimonial-avatar">
                                        <i className="fas fa-user text-gray-600"></i>
                                    </div>
                                    <div>
                                        <div className="testimonial-name">Andi Pratama</div>
                                        <div className="testimonial-role">CEO, TechStart</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="testimonial-card">
                                <div className="testimonial-text">
                                    "Saya sangat puas dengan layanan CPM2. Hasilnya melampaui ekspektasi dan tim support sangat responsif!"
                                </div>
                                <div className="testimonial-author">
                                    <div className="testimonial-avatar">
                                        <i className="fas fa-user text-gray-600"></i>
                                    </div>
                                    <div>
                                        <div className="testimonial-name">Siti Nurhaliza</div>
                                        <div className="testimonial-role">Marketing Manager, FashionHub</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* CTA Section */}
                    <div className="bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg p-8 text-white text-center">
                        <h2 className="text-2xl font-bold mb-4">Siap Meningkatkan Bisnis Anda?</h2>
                        <p className="mb-6">Bergabunglah dengan ribuan pengguna yang telah merasakan manfaat layanan kami</p>
                        <button 
                            onClick={() => setCurrentPage('store')}
                            className="bg-white text-purple-700 font-bold py-3 px-8 rounded-full hover:bg-gray-100 transition duration-300 transform hover:scale-105 pulse"
                        >
                            Mulai Sekarang
                        </button>
                    </div>
                    
                    {userBalance < MIN_BALANCE_FOR_CPM && (
                        <div className="mt-6 p-4 bg-yellow-100 rounded-lg">
                            <p className="text-sm text-yellow-800 text-center">
                                <i className="fas fa-info-circle mr-2"></i>
                                Minimal saldo {CURRENCY} {MIN_BALANCE_FOR_CPM.toLocaleString('id-ID')} untuk mengakses fitur CPM1 dan CPM2
                            </p>
                        </div>
                    )}
                </div>
            );

            const renderStorePage = () => (
                <div>
                    <h2 className="page-title">Toko</h2>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {/* CPM1 Product Card */}
                        <div className="product-card">
                            <div className="product-image">
                                <img src="images/cpm1.jpg" alt="CPM1" />
                            </div>
                            <div className="product-details">
                                <h3 className="product-title">KING CPM 1</h3>
                                <p className="product-description">
                                    Layanan CPM1 untuk meningkatkan engagement dan visibility konten Anda. Pastikan anda ingat email dan password.
                                    Note : INGAT â€¼ï¸ Wajib logout akun cpm anda terlebih dahulu.
                                </p>
                                <div className="price-tag">
                                    <span className="price-amount">{CURRENCY} {MIN_BALANCE_FOR_CPM.toLocaleString('id-ID')}</span>
                                    <span className="price-info">Harga</span>
                                </div>
                                <button 
                                    onClick={handleCPM1Click}
                                    className={`buy-button w-full ${userBalance >= MIN_BALANCE_FOR_CPM ? '' : 'opacity-50 cursor-not-allowed'}`}
                                    disabled={!isLoggedIn || userBalance < MIN_BALANCE_FOR_CPM}
                                >
                                    {isLoggedIn ? (
                                        userBalance >= MIN_BALANCE_FOR_CPM ? 'BUY' : 'SALDO TIDAK MENCUKUPI'
                                    ) : 'LOGIN UNTUK MEMBELI'}
                                </button>
                            </div>
                        </div>
                        
                        {/* CPM2 Product Card */}
                        <div className="product-card">
                            <div className="product-image">
                                <img src="images/cpm2.jpg" alt="CPM2" />
                            </div>
                            <div className="product-details">
                                <h3 className="product-title">KING CPM 2</h3>
                                <p className="product-description">
                                    Layanan CPM2 premium dengan kualitas engagement lebih tinggi. Pastikan anda ingat email dan password.
                                    Note : INGAT â€¼ï¸ Wajib logout akun cpm anda terlebih dahulu.
                                </p>
                                <div className="price-tag">
                                    <span className="price-amount">{CURRENCY} {MIN_BALANCE_FOR_CPM.toLocaleString('id-ID')}</span>
                                    <span className="price-info">Harga</span>
                                </div>
                                <button 
                                    onClick={handleCPM2Click}
                                    className={`buy-button w-full ${userBalance >= MIN_BALANCE_FOR_CPM ? '' : 'opacity-50 cursor-not-allowed'}`}
                                    disabled={!isLoggedIn || userBalance < MIN_BALANCE_FOR_CPM}
                                >
                                    {isLoggedIn ? (
                                        userBalance >= MIN_BALANCE_FOR_CPM ? 'BUY' : 'SALDO TIDAK MENCUKUPI'
                                    ) : 'LOGIN UNTUK MEMBELI'}
                                </button>
                            </div>
                        </div>
                        
                        {/* Unlock All Cars Product Card */}
                        <div className={`product-card ${userBalance < UNLOCK_ALL_CARS_PRICE ? 'locked-feature' : ''} relative`}>
                            <div className="special-badge">POPULAR</div>
                            <div className="product-image">
                                <img src="images/cars.jpg" alt="Unlock All Cars" />
                            </div>
                            <div className="product-details">
                                <h3 className="product-title">UNLOCK ALL CAR</h3>
                                <p className="product-description">
                                    Buka semua mobil yang tersedia dalam game dengan satu klik. Perlu di Perhatikanâ€¼ï¸ Proses ini akan menimpa mobil dan livery akun anda. 
                                    Note : INGAT â€¼ï¸ Wajib logout akun cpm anda terlebih dahulu.
                                </p>
                                <div className="price-tag">
                                    <span className="price-amount">{CURRENCY} {UNLOCK_ALL_CARS_PRICE.toLocaleString('id-ID')}</span>
                                    <span className="price-info">Harga</span>
                                </div>
                                <button 
                                    onClick={handleUnlockAllCars}
                                    className={`buy-button w-full ${userBalance >= UNLOCK_ALL_CARS_PRICE ? '' : 'opacity-50 cursor-not-allowed'}`}
                                    disabled={!isLoggedIn || userBalance < UNLOCK_ALL_CARS_PRICE}
                                >
                                    {isLoggedIn ? (
                                        userBalance >= UNLOCK_ALL_CARS_PRICE ? 'BUY' : 'SALDO TIDAK MENCUKUPI'
                                    ) : 'LOGIN UNTUK MEMBELI'}
                                </button>
                            </div>
                            {userBalance < UNLOCK_ALL_CARS_PRICE && (
                                <div className="lock-icon">
                                    <i className="fas fa-lock"></i>
                                </div>
                            )}
                        </div>

                        {/* Unlock Police Product Card */}
                        <div className={`product-card ${userBalance < UNLOCK_POLICE_PRICE ? 'locked-feature' : ''} relative`}>
                            <div className="special-badge">HOT</div>
                            <div className="product-image">
                                <img src="images/police.jpg" alt="Unlock Police" />
                            </div>
                            <div className="product-details">
                                <h3 className="product-title">UNLOCK POLICE</h3>
                                <p className="product-description">
                                    Buka fitur police pada semua mobil Anda. Nikmati kemampuan mengejar dan menangkap pelanggar lalu lintas.
                                    Note : INGAT â€¼ï¸ Wajib logout akun cpm anda terlebih dahulu.
                                </p>
                                <div className="price-tag">
                                    <span className="price-amount">{CURRENCY} {UNLOCK_POLICE_PRICE.toLocaleString('id-ID')}</span>
                                    <span className="price-info">Harga</span>
                                </div>
                                <button 
                                    onClick={handleUnlockPolice}
                                    className={`buy-button w-full ${userBalance >= UNLOCK_POLICE_PRICE ? '' : 'opacity-50 cursor-not-allowed'}`}
                                    disabled={!isLoggedIn || userBalance < UNLOCK_POLICE_PRICE}
                                >
                                    {isLoggedIn ? (
                                        userBalance >= UNLOCK_POLICE_PRICE ? 'BUY' : 'SALDO TIDAK MENCUKUPI'
                                    ) : 'LOGIN UNTUK MEMBELI'}
                                </button>
                            </div>
                            {userBalance < UNLOCK_POLICE_PRICE && (
                                <div className="lock-icon">
                                    <i className="fas fa-lock"></i>
                                </div>
                            )}
                        </div>

                        {/* Costume Engine Product Card */}
                        <div className={`product-card ${userBalance < COSTUME_ENGINE_PRICE ? 'locked-feature' : ''} relative`}>
                            <div className="special-badge">NEW</div>
                            <div className="product-image">
                                <img src="images/engine.jpg" alt="Costume Engine" />
                            </div>
                            <div className="product-details">
                                <h3 className="product-title">COSTUME ENGINE</h3>
                                <p className="product-description">
                                    Kustomisasi parameter mesin mobil Anda sesuai keinginan. Atur HP, NM, dan grip untuk performa maksimal.
                                    Note : INGAT â€¼ï¸ Wajib logout akun cpm anda terlebih dahulu.
                                </p>
                                <div className="price-tag">
                                    <span className="price-amount">{CURRENCY} {COSTUME_ENGINE_PRICE.toLocaleString('id-ID')}</span>
                                    <span className="price-info">Harga</span>
                                </div>
                                <button 
                                    onClick={handleCostumeEngine}
                                    className={`buy-button w-full ${userBalance >= COSTUME_ENGINE_PRICE ? '' : 'opacity-50 cursor-not-allowed'}`}
                                    disabled={!isLoggedIn || userBalance < COSTUME_ENGINE_PRICE}
                                >
                                    {isLoggedIn ? (
                                        userBalance >= COSTUME_ENGINE_PRICE ? 'BUY' : 'SALDO TIDAK MENCUKUPI'
                                    ) : 'LOGIN UNTUK MEMBELI'}
                                </button>
                            </div>
                            {userBalance < COSTUME_ENGINE_PRICE && (
                                <div className="lock-icon">
                                    <i className="fas fa-lock"></i>
                                </div>
                            )}
                        </div>
                        
                        {/* Costume Steering Product Card */}
                        <div className={`product-card ${userBalance < COSTUME_STEERING_PRICE ? 'locked-feature' : ''} relative`}>
                            <div className="special-badge">NEW</div>
                            <div className="product-image">
                                <img src="images/stering.jpg" alt="Costume Steering" />
                            </div>
                            <div className="product-details">
                                <h3 className="product-title">COSTUME STEERING</h3>
                                <p className="product-description">
                                    Kustomisasi sudut kemudi mobil Anda sesuai keinginan. Pilih antara 40Â°, 60Â°, atau 90Â° untuk kontrol yang lebih baik.
                                    Note : INGAT â€¼ï¸ Wajib logout akun cpm anda terlebih dahulu.
                                </p>
                                <div className="price-tag">
                                    <span className="price-amount">{CURRENCY} {COSTUME_STEERING_PRICE.toLocaleString('id-ID')}</span>
                                    <span className="price-info">Harga</span>
                                </div>
                                <button 
                                    onClick={handleCostumeSteering}
                                    className={`buy-button w-full ${userBalance >= COSTUME_STEERING_PRICE ? '' : 'opacity-50 cursor-not-allowed'}`}
                                    disabled={!isLoggedIn || userBalance < COSTUME_STEERING_PRICE}
                                >
                                    {isLoggedIn ? (
                                        userBalance >= COSTUME_STEERING_PRICE ? 'BUY' : 'SALDO TIDAK MENCUKUPI'
                                    ) : 'LOGIN UNTUK MEMBELI'}
                                </button>
                            </div>
                            {userBalance < COSTUME_STEERING_PRICE && (
                                <div className="lock-icon">
                                    <i className="fas fa-lock"></i>
                                </div>
                            )}
                        </div>
                        
                        {/* Body Kit Product Card */}
                        <div className={`product-card ${userBalance < UNLOCK_BODYKIT_PRICE ? 'locked-feature' : ''} relative`}>
                            <div className="special-badge">NEW</div>
                            <div className="product-image">
                                <img src="images/body.jpg" alt="Unlock Body Kit" />
                            </div>
                            <div className="product-details">
                                <h3 className="product-title">UNLOCK BODY KIT</h3>
                                <p className="product-description">
                                    Buka semua body kit untuk semua mobil Anda. Nikmati berbagai pilihan modifikasi untuk tampilan mobil yang lebih keren.
                                    Note : INGAT â€¼ï¸ Wajib logout akun cpm anda terlebih dahulu.
                                </p>
                                <div className="price-tag">
                                    <span className="price-amount">{CURRENCY} {UNLOCK_BODYKIT_PRICE.toLocaleString('id-ID')}</span>
                                    <span className="price-info">Harga</span>
                                </div>
                                <button 
                                    onClick={handleBodyKit}
                                    className={`buy-button w-full ${userBalance >= UNLOCK_BODYKIT_PRICE ? '' : 'opacity-50 cursor-not-allowed'}`}
                                    disabled={!isLoggedIn || userBalance < UNLOCK_BODYKIT_PRICE}
                                >
                                    {isLoggedIn ? (
                                        userBalance >= UNLOCK_BODYKIT_PRICE ? 'BUY' : 'SALDO TIDAK MENCUKUPI'
                                    ) : 'LOGIN UNTUK MEMBELI'}
                                </button>
                            </div>
                            {userBalance < UNLOCK_BODYKIT_PRICE && (
                                <div className="lock-icon">
                                    <i className="fas fa-lock"></i>
                                </div>
                            )}
                        </div>
                        
                        {/* Chrome Body Product Card */}
                        <div className={`product-card ${userBalance < CHROME_BODY_PRICE ? 'locked-feature' : ''} relative`}>
                            <div className="special-badge">NEW</div>
                            <div className="product-image">
                                <img src="images/chrome.jpg" alt="Chrome Body" />
                            </div>
                            <div className="product-details">
                                <h3 className="product-title">CHROME BODY</h3>
                                <p className="product-description">
                                    Ubah tampilan mobil Anda dengan efek chrome yang mengkilap. Pilih dari berbagai tingkat kilap yang tersedia.
                                    Note : INGAT â€¼ï¸ Wajib logout akun cpm anda terlebih dahulu.
                                </p>
                                <div className="price-tag">
                                    <span className="price-amount">{CURRENCY} {CHROME_BODY_PRICE.toLocaleString('id-ID')}</span>
                                    <span className="price-info">Harga</span>
                                </div>
                                <button 
                                    onClick={handleChromeBody}
                                    className={`buy-button w-full ${userBalance >= CHROME_BODY_PRICE ? '' : 'opacity-50 cursor-not-allowed'}`}
                                    disabled={!isLoggedIn || userBalance < CHROME_BODY_PRICE}
                                >
                                    {isLoggedIn ? (
                                        userBalance >= CHROME_BODY_PRICE ? 'BUY' : 'SALDO TIDAK MENCUKUPI'
                                    ) : 'LOGIN UNTUK MEMBELI'}
                                </button>
                            </div>
                            {userBalance < CHROME_BODY_PRICE && (
                                <div className="lock-icon">
                                    <i className="fas fa-lock"></i>
                                </div>
                            )}
                        </div>
                    </div>
                    
                    {userBalance < CHROME_BODY_PRICE && (
                        <div className="mt-8 p-4 bg-yellow-100 rounded-lg">
                            <p className="text-sm text-yellow-800 text-center">
                                <i className="fas fa-info-circle mr-2"></i>
                                Minimal saldo {CURRENCY} {CHROME_BODY_PRICE.toLocaleString('id-ID')} untuk mengakses fitur Chrome Body
                            </p>
                        </div>
                    )}
                    
                    {/* Modal Unlock All Cars */}
                    {showUnlockModal && (
                        <div className="unlock-modal">
                            <div className="modal-content">
                                <div className="modal-header">
                                    <h3 className="modal-title">Unlock All Cars</h3>
                                    <button 
                                        className="modal-close"
                                        onClick={() => setShowUnlockModal(false)}
                                        disabled={isUnlocking}
                                    >
                                        <i className="fas fa-times"></i>
                                    </button>
                                </div>
                                <div className="modal-body">
                                    <p>Apakah Anda yakin ingin membuka semua mobil dalam game?</p>
                                    <p className="text-sm text-gray-600 mt-2">Proses ini akan memakan waktu beberapa saat. Pastikan Anda telah logout dari game sebelum memulai proses ini.</p>
                                    
                                    {unlockResult && (
                                        <div className={`unlock-status ${unlockResult.success ? 'success' : 'error'} mt-4`}>
                                            {unlockResult.success ? (
                                                <p><i className="fas fa-check-circle mr-2"></i> {unlockResult.message}</p>
                                            ) : (
                                                <p><i className="fas fa-exclamation-circle mr-2"></i> {unlockResult.error}</p>
                                            )}
                                        </div>
                                    )}
                                    
                                    {isUnlocking && (
                                        <div className="mt-4">
                                            <div className="flex justify-between text-sm mb-1">
                                                <span>Progress</span>
                                                <span>{unlockProgress}%</span>
                                            </div>
                                            <div className="progress-bar">
                                                <div 
                                                    className="progress" 
                                                    style={{ width: `${unlockProgress}%` }}
                                                ></div>
                                            </div>
                                            <p className="text-sm text-gray-600 mt-2">{unlockStatus}</p>
                                        </div>
                                    )}
                                    
                                    <div className="form-group">
                                        <label htmlFor="unlockEmail" className="form-label">Email CPM</label>
                                        <input
                                            type="email"
                                            id="unlockEmail"
                                            value={unlockEmail}
                                            onChange={(e) => setUnlockEmail(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan email CPM Anda"
                                            required
                                            disabled={isUnlocking}
                                        />
                                    </div>
                                    
                                    <div className="form-group">
                                        <label htmlFor="unlockPassword" className="form-label">Password CPM</label>
                                        <input
                                            type="password"
                                            id="unlockPassword"
                                            value={unlockPassword}
                                            onChange={(e) => setUnlockPassword(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan password CPM Anda"
                                            required
                                            disabled={isUnlocking}
                                        />
                                    </div>
                                    
                                    <div className="flex justify-end mt-4">
                                        <button 
                                            className="mr-2 px-4 py-2 border border-gray-300 rounded-md"
                                            onClick={() => setShowUnlockModal(false)}
                                            disabled={isUnlocking}
                                        >
                                            Batal
                                        </button>
                                        <button 
                                            className="px-4 py-2 bg-blue-600 text-white rounded-md"
                                            onClick={handleUnlockSubmit}
                                            disabled={isUnlocking}
                                        >
                                            {isUnlocking ? 'Memproses...' : 'Ya, Buka Semua Mobil'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Modal Unlock Police */}
                    {showUnlockPoliceModal && (
                        <div className="unlock-modal">
                            <div className="modal-content">
                                <div className="modal-header">
                                    <h3 className="modal-title">Unlock Fitur Police</h3>
                                    <button 
                                        className="modal-close"
                                        onClick={() => setShowUnlockPoliceModal(false)}
                                        disabled={isUnlockingPolice}
                                    >
                                        <i className="fas fa-times"></i>
                                    </button>
                                </div>
                                <div className="modal-body">
                                    <p>Apakah Anda yakin ingin membuka fitur Police pada semua mobil?</p>
                                    <p className="text-sm text-gray-600 mt-2">Proses ini akan memakan waktu beberapa saat. Pastikan Anda telah logout dari game sebelum memulai proses ini.</p>
                                    
                                    {unlockPoliceResult && (
                                        <div className={`unlock-status ${unlockPoliceResult.success ? 'success' : 'error'} mt-4`}>
                                            {unlockPoliceResult.success ? (
                                                <p><i className="fas fa-check-circle mr-2"></i> {unlockPoliceResult.message}</p>
                                            ) : (
                                                <p><i className="fas fa-exclamation-circle mr-2"></i> {unlockPoliceResult.error}</p>
                                            )}
                                        </div>
                                    )}
                                    
                                    {isUnlockingPolice && (
                                        <div className="mt-4">
                                            <div className="flex justify-between text-sm mb-1">
                                                <span>Progress</span>
                                                <span>{unlockPoliceProgress}%</span>
                                            </div>
                                            <div className="progress-bar">
                                                <div 
                                                    className="progress" 
                                                    style={{ width: `${unlockPoliceProgress}%` }}
                                                ></div>
                                            </div>
                                            <p className="text-sm text-gray-600 mt-2">{unlockPoliceStatus}</p>
                                        </div>
                                    )}
                                    
                                    <div className="form-group">
                                        <label htmlFor="unlockPoliceEmail" className="form-label">Email CPM</label>
                                        <input
                                            type="email"
                                            id="unlockPoliceEmail"
                                            value={unlockPoliceEmail}
                                            onChange={(e) => setUnlockPoliceEmail(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan email CPM Anda"
                                            required
                                            disabled={isUnlockingPolice}
                                        />
                                    </div>
                                    
                                    <div className="form-group">
                                        <label htmlFor="unlockPolicePassword" className="form-label">Password CPM</label>
                                        <input
                                            type="password"
                                            id="unlockPolicePassword"
                                            value={unlockPolicePassword}
                                            onChange={(e) => setUnlockPolicePassword(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan password CPM Anda"
                                            required
                                            disabled={isUnlockingPolice}
                                        />
                                    </div>
                                    
                                    <div className="flex justify-end mt-4">
                                        <button 
                                            className="mr-2 px-4 py-2 border border-gray-300 rounded-md"
                                            onClick={() => setShowUnlockPoliceModal(false)}
                                            disabled={isUnlockingPolice}
                                        >
                                            Batal
                                        </button>
                                        <button 
                                            className="px-4 py-2 bg-blue-600 text-white rounded-md"
                                            onClick={handleUnlockPoliceSubmit}
                                            disabled={isUnlockingPolice}
                                        >
                                            {isUnlockingPolice ? 'Memproses...' : 'Ya, Buka Fitur Police'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Modal Costume Engine */}
                    {showCostumeEngineModal && (
                        <div className="unlock-modal">
                            <div className="modal-content">
                                <div className="modal-header">
                                    <h3 className="modal-title">Costume Engine</h3>
                                    <button 
                                        className="modal-close"
                                        onClick={() => setShowCostumeEngineModal(false)}
                                        disabled={isCostumeEngineProcessing}
                                    >
                                        <i className="fas fa-times"></i>
                                    </button>
                                </div>
                                <div className="modal-body">
                                    <p>Atur parameter mesin mobil Anda sesuai keinginan.</p>
                                    <p className="text-sm text-gray-600 mt-2">Proses ini akan memakan waktu beberapa saat. Pastikan Anda telah logout dari game sebelum memulai proses ini.</p>
                                    
                                    {costumeEngineResult && (
                                        <div className={`unlock-status ${costumeEngineResult.success ? 'success' : 'error'} mt-4`}>
                                            {costumeEngineResult.success ? (
                                                <p><i className="fas fa-check-circle mr-2"></i> {costumeEngineResult.message}</p>
                                            ) : (
                                                <p><i className="fas fa-exclamation-circle mr-2"></i> {costumeEngineResult.error}</p>
                                            )}
                                        </div>
                                    )}
                                    
                                    {isCostumeEngineProcessing && (
                                        <div className="mt-4">
                                            <div className="flex justify-between text-sm mb-1">
                                                <span>Progress</span>
                                                <span>{costumeEngineProgress}%</span>
                                            </div>
                                            <div className="progress-bar">
                                                <div 
                                                    className="progress" 
                                                    style={{ width: `${costumeEngineProgress}%` }}
                                                ></div>
                                            </div>
                                            <p className="text-sm text-gray-600 mt-2">{costumeEngineStatus}</p>
                                        </div>
                                    )}
                                    
                                    <div className="form-group">
                                        <label htmlFor="costumeEngineEmail" className="form-label">Email CPM</label>
                                        <input
                                            type="email"
                                            id="costumeEngineEmail"
                                            value={costumeEngineEmail}
                                            onChange={(e) => setCostumeEngineEmail(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan email CPM Anda"
                                            required
                                            disabled={isCostumeEngineProcessing}
                                        />
                                    </div>
                                    
                                    <div className="form-group">
                                        <label htmlFor="costumeEnginePassword" className="form-label">Password CPM</label>
                                        <input
                                            type="password"
                                            id="costumeEnginePassword"
                                            value={costumeEnginePassword}
                                            onChange={(e) => setCostumeEnginePassword(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan password CPM Anda"
                                            required
                                            disabled={isCostumeEngineProcessing}
                                        />
                                    </div>
                                    
                                    <div className="engine-params">
                                        <h4 className="font-semibold mb-3">Parameter Mesin</h4>
                                        
                                        <div className="param-row">
                                            <div className="param-col">
                                                <div className="param-group">
                                                    <label htmlFor="hp">HP</label>
                                                    <input
                                                        type="number"
                                                        id="hp"
                                                        value={hp}
                                                        onChange={(e) => setHp(e.target.value)}
                                                        className="form-input"
                                                        disabled={isCostumeEngineProcessing}
                                                    />
                                                </div>
                                            </div>
                                            <div className="param-col">
                                                <div className="param-group">
                                                    <label htmlFor="innerHp">Inner HP</label>
                                                    <input
                                                        type="number"
                                                        id="innerHp"
                                                        value={innerHp}
                                                        onChange={(e) => setInnerHp(e.target.value)}
                                                        className="form-input"
                                                        disabled={isCostumeEngineProcessing}
                                                    />
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="param-row">
                                            <div className="param-col">
                                                <div className="param-group">
                                                    <label htmlFor="nm">NM</label>
                                                    <input
                                                        type="number"
                                                        id="nm"
                                                        value={nm}
                                                        onChange={(e) => setNm(e.target.value)}
                                                        className="form-input"
                                                        disabled={isCostumeEngineProcessing}
                                                    />
                                                </div>
                                            </div>
                                            <div className="param-col">
                                                <div className="param-group">
                                                    <label htmlFor="innerNm">Inner NM</label>
                                                    <input
                                                        type="number"
                                                        id="innerNm"
                                                        value={innerNm}
                                                        onChange={(e) => setInnerNm(e.target.value)}
                                                        className="form-input"
                                                        disabled={isCostumeEngineProcessing}
                                                    />
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="param-group">
                                            <label htmlFor="grip">Grip</label>
                                            <input
                                                type="number"
                                                id="grip"
                                                value={grip}
                                                onChange={(e) => setGrip(e.target.value)}
                                                className="form-input"
                                                step="0.1"
                                                min="0"
                                                max="10"
                                                disabled={isCostumeEngineProcessing}
                                            />
                                        </div>
                                    </div>
                                    
                                    <div className="flex justify-end mt-4">
                                        <button 
                                            className="mr-2 px-4 py-2 border border-gray-300 rounded-md"
                                            onClick={() => setShowCostumeEngineModal(false)}
                                            disabled={isCostumeEngineProcessing}
                                        >
                                            Batal
                                        </button>
                                        <button 
                                            className="px-4 py-2 bg-blue-600 text-white rounded-md"
                                            onClick={handleCostumeEngineSubmit}
                                            disabled={isCostumeEngineProcessing}
                                        >
                                            {isCostumeEngineProcessing ? 'Memproses...' : 'Terapkan Parameter'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {/* Modal Costume Steering */}
                    {showCostumeSteeringModal && (
                        <div className="unlock-modal">
                            <div className="modal-content">
                                <div className="modal-header">
                                    <h3 className="modal-title">Costume Steering</h3>
                                    <button 
                                        className="modal-close"
                                        onClick={() => setShowCostumeSteeringModal(false)}
                                        disabled={isCostumeSteeringProcessing}
                                    >
                                        <i className="fas fa-times"></i>
                                    </button>
                                </div>
                                <div className="modal-body">
                                    <p>Pilih sudut kemudi yang Anda inginkan untuk semua mobil.</p>
                                    <p className="text-sm text-gray-600 mt-2">Proses ini akan memakan waktu beberapa saat. Pastikan Anda telah logout dari game sebelum memulai proses ini.</p>
                                    
                                    {costumeSteeringResult && (
                                        <div className={`unlock-status ${costumeSteeringResult.success ? 'success' : 'error'} mt-4`}>
                                            {costumeSteeringResult.success ? (
                                                <p><i className="fas fa-check-circle mr-2"></i> {costumeSteeringResult.message}</p>
                                            ) : (
                                                <p><i className="fas fa-exclamation-circle mr-2"></i> {costumeSteeringResult.error}</p>
                                            )}
                                        </div>
                                    )}
                                    
                                    {isCostumeSteeringProcessing && (
                                        <div className="mt-4">
                                            <div className="flex justify-between text-sm mb-1">
                                                <span>Progress</span>
                                                <span>{costumeSteeringProgress}%</span>
                                            </div>
                                            <div className="progress-bar">
                                                <div 
                                                    className="progress" 
                                                    style={{ width: `${costumeSteeringProgress}%` }}
                                                ></div>
                                            </div>
                                            <p className="text-sm text-gray-600 mt-2">{costumeSteeringStatus}</p>
                                        </div>
                                    )}
                                    
                                    <div className="form-group">
                                        <label htmlFor="costumeSteeringEmail" className="form-label">Email CPM</label>
                                        <input
                                            type="email"
                                            id="costumeSteeringEmail"
                                            value={costumeSteeringEmail}
                                            onChange={(e) => setCostumeSteeringEmail(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan email CPM Anda"
                                            required
                                            disabled={isCostumeSteeringProcessing}
                                        />
                                    </div>
                                    
                                    <div className="form-group">
                                        <label htmlFor="costumeSteeringPassword" className="form-label">Password CPM</label>
                                        <input
                                            type="password"
                                            id="costumeSteeringPassword"
                                            value={costumeSteeringPassword}
                                            onChange={(e) => setCostumeSteeringPassword(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan password CPM Anda"
                                            required
                                            disabled={isCostumeSteeringProcessing}
                                        />
                                    </div>
                                    
                                    <div className="mb-4">
                                        <h4 className="font-semibold mb-3">Pilih Sudut Kemudi</h4>
                                        
                                        <div className="row">
                                            <div className="col-md-4">
                                                <div className={`angle-option ${selectedSteeringAngle === 40 ? 'selected' : ''}`} onClick={() => setSelectedSteeringAngle(40)}>
                                                    <div className="steering-visual angle-40">
                                                        <div className="steering-wheel">
                                                            <div className="steering-mark"></div>
                                                        </div>
                                                    </div>
                                                    <div className="angle-icon">
                                                        <i className="fas fa-angle-right"></i>
                                                    </div>
                                                    <div className="angle-title">40Â°</div>
                                                    <div className="angle-description">Sudut kemudi normal</div>
                                                </div>
                                            </div>
                                            <div className="col-md-4">
                                                <div className={`angle-option ${selectedSteeringAngle === 60 ? 'selected' : ''}`} onClick={() => setSelectedSteeringAngle(60)}>
                                                    <div className="steering-visual angle-60">
                                                        <div className="steering-wheel">
                                                            <div className="steering-mark"></div>
                                                        </div>
                                                    </div>
                                                    <div className="angle-icon">
                                                        <i className="fas fa-angle-double-right"></i>
                                                    </div>
                                                    <div className="angle-title">60Â°</div>
                                                    <div className="angle-description">Sudut kemudi lebar</div>
                                                </div>
                                            </div>
                                            <div className="col-md-4">
                                                <div className={`angle-option ${selectedSteeringAngle === 90 ? 'selected' : ''}`} onClick={() => setSelectedSteeringAngle(90)}>
                                                    <div className="steering-visual angle-90">
                                                        <div className="steering-wheel">
                                                            <div className="steering-mark"></div>
                                                        </div>
                                                    </div>
                                                    <div className="angle-icon">
                                                        <i className="fas fa-exchange-alt"></i>
                                                    </div>
                                                    <div className="angle-title">90Â°</div>
                                                    <div className="angle-description">Sudut kemudi maksimal</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="flex justify-end mt-4">
                                        <button 
                                            className="mr-2 px-4 py-2 border border-gray-300 rounded-md"
                                            onClick={() => setShowCostumeSteeringModal(false)}
                                            disabled={isCostumeSteeringProcessing}
                                        >
                                            Batal
                                        </button>
                                        <button 
                                            className="px-4 py-2 bg-blue-600 text-white rounded-md"
                                            onClick={handleCostumeSteeringSubmit}
                                            disabled={isCostumeSteeringProcessing}
                                        >
                                            {isCostumeSteeringProcessing ? 'Memproses...' : 'Terapkan Sudut Kemudi'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {/* Modal Body Kit */}
                    {showBodyKitModal && (
                        <div className="unlock-modal">
                            <div className="modal-content">
                                <div className="modal-header">
                                    <h3 className="modal-title">Unlock Body Kit</h3>
                                    <button 
                                        className="modal-close"
                                        onClick={() => setShowBodyKitModal(false)}
                                        disabled={isBodyKitProcessing}
                                    >
                                        <i className="fas fa-times"></i>
                                    </button>
                                </div>
                                <div className="modal-body">
                                    <p>Buka semua body kit untuk semua mobil Anda.</p>
                                    <p className="text-sm text-gray-600 mt-2">Proses ini akan memakan waktu beberapa saat. Pastikan Anda telah logout dari game sebelum memulai proses ini.</p>
                                    
                                    {bodyKitResult && (
                                        <div className={`unlock-status ${bodyKitResult.success ? 'success' : 'error'} mt-4`}>
                                            {bodyKitResult.success ? (
                                                <p><i className="fas fa-check-circle mr-2"></i> {bodyKitResult.message}</p>
                                            ) : (
                                                <p><i className="fas fa-exclamation-circle mr-2"></i> {bodyKitResult.error}</p>
                                            )}
                                        </div>
                                    )}
                                    
                                    {isBodyKitProcessing && (
                                        <div className="mt-4">
                                            <div className="flex justify-between text-sm mb-1">
                                                <span>Progress</span>
                                                <span>{bodyKitProgress}%</span>
                                            </div>
                                            <div className="progress-bar">
                                                <div 
                                                    className="progress" 
                                                    style={{ width: `${bodyKitProgress}%` }}
                                                ></div>
                                            </div>
                                            <p className="text-sm text-gray-600 mt-2">{bodyKitStatus}</p>
                                        </div>
                                    )}
                                    
                                    <div className="form-group">
                                        <label htmlFor="bodyKitEmail" className="form-label">Email CPM</label>
                                        <input
                                            type="email"
                                            id="bodyKitEmail"
                                            value={bodyKitEmail}
                                            onChange={(e) => setBodyKitEmail(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan email CPM Anda"
                                            required
                                            disabled={isBodyKitProcessing}
                                        />
                                    </div>
                                    
                                    <div className="form-group">
                                        <label htmlFor="bodyKitPassword" className="form-label">Password CPM</label>
                                        <input
                                            type="password"
                                            id="bodyKitPassword"
                                            value={bodyKitPassword}
                                            onChange={(e) => setBodyKitPassword(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan password CPM Anda"
                                            required
                                            disabled={isBodyKitProcessing}
                                        />
                                    </div>
                                    
                                    <div className="mb-4">
                                        <h4 className="font-semibold mb-3">Pilih Jenis Body Kit</h4>
                                        
                                        <div className="bodykit-options">
                                            <div className={`bodykit-option ${selectedBodyKitType === 'all' ? 'selected' : ''}`} onClick={() => setSelectedBodyKitType('all')}>
                                                <div className="bodykit-icon">
                                                    <i className="fas fa-car"></i>
                                                </div>
                                                <div className="bodykit-name">Semua Body Kit</div>
                                            </div>
                                            <div className={`bodykit-option ${selectedBodyKitType === 'sport' ? 'selected' : ''}`} onClick={() => setSelectedBodyKitType('sport')}>
                                                <div className="bodykit-icon">
                                                    <i className="fas fa-flag-checkered"></i>
                                                </div>
                                                <div className="bodykit-name">Sport</div>
                                            </div>
                                            <div className={`bodykit-option ${selectedBodyKitType === 'luxury' ? 'selected' : ''}`} onClick={() => setSelectedBodyKitType('luxury')}>
                                                <div className="bodykit-icon">
                                                    <i className="fas fa-gem"></i>
                                                </div>
                                                <div className="bodykit-name">Luxury</div>
                                            </div>
                                            <div className={`bodykit-option ${selectedBodyKitType === 'offroad' ? 'selected' : ''}`} onClick={() => setSelectedBodyKitType('offroad')}>
                                                <div className="bodykit-icon">
                                                    <i className="fas fa-mountain"></i>
                                                </div>
                                                <div className="bodykit-name">Offroad</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="car-count">
                                        <div className="car-count-number">{carCount} mobil</div>
                                        <div className="car-count-text">Body kit akan dibuka untuk semua mobil yang dimiliki akun Anda</div>
                                    </div>
                                    
                                    <div className="flex justify-end mt-4">
                                        <button 
                                            className="mr-2 px-4 py-2 border border-gray-300 rounded-md"
                                            onClick={() => setShowBodyKitModal(false)}
                                            disabled={isBodyKitProcessing}
                                        >
                                            Batal
                                        </button>
                                        <button 
                                            className="px-4 py-2 bg-blue-600 text-white rounded-md"
                                            onClick={handleBodyKitSubmit}
                                            disabled={isBodyKitProcessing}
                                        >
                                            {isBodyKitProcessing ? 'Memproses...' : 'Buka Body Kit'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {/* Modal Chrome Body */}
                    {showChromeBodyModal && (
                        <div className="unlock-modal">
                            <div className="modal-content">
                                <div className="modal-header">
                                    <h3 className="modal-title">Chrome Body</h3>
                                    <button 
                                        className="modal-close"
                                        onClick={() => setShowChromeBodyModal(false)}
                                        disabled={isChromeBodyProcessing}
                                    >
                                        <i className="fas fa-times"></i>
                                    </button>
                                </div>
                                <div className="modal-body">
                                    <p>Ubah tampilan mobil Anda dengan efek chrome yang mengkilap.</p>
                                    <p className="text-sm text-gray-600 mt-2">Proses ini akan memakan waktu beberapa saat. Pastikan Anda telah logout dari game sebelum memulai proses ini.</p>
                                    
                                    {chromeBodyResult && (
                                        <div className={`unlock-status ${chromeBodyResult.success ? 'success' : 'error'} mt-4`}>
                                            {chromeBodyResult.success ? (
                                                <p><i className="fas fa-check-circle mr-2"></i> {chromeBodyResult.message}</p>
                                            ) : (
                                                <p><i className="fas fa-exclamation-circle mr-2"></i> {chromeBodyResult.error}</p>
                                            )}
                                        </div>
                                    )}
                                    
                                    {isChromeBodyProcessing && (
                                        <div className="mt-4">
                                            <div className="flex justify-between text-sm mb-1">
                                                <span>Progress</span>
                                                <span>{chromeBodyProgress}%</span>
                                            </div>
                                            <div className="progress-bar">
                                                <div 
                                                    className="progress" 
                                                    style={{ width: `${chromeBodyProgress}%` }}
                                                ></div>
                                            </div>
                                            <p className="text-sm text-gray-600 mt-2">{chromeBodyStatus}</p>
                                        </div>
                                    )}
                                    
                                    <div className="form-group">
                                        <label htmlFor="chromeBodyEmail" className="form-label">Email CPM</label>
                                        <input
                                            type="email"
                                            id="chromeBodyEmail"
                                            value={chromeBodyEmail}
                                            onChange={(e) => setChromeBodyEmail(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan email CPM Anda"
                                            required
                                            disabled={isChromeBodyProcessing}
                                        />
                                    </div>
                                    
                                    <div className="form-group">
                                        <label htmlFor="chromeBodyPassword" className="form-label">Password CPM</label>
                                        <input
                                            type="password"
                                            id="chromeBodyPassword"
                                            value={chromeBodyPassword}
                                            onChange={(e) => setChromeBodyPassword(e.target.value)}
                                            className="form-input"
                                            placeholder="Masukkan password CPM Anda"
                                            required
                                            disabled={isChromeBodyProcessing}
                                        />
                                    </div>
                                    
                                    <div className="mb-4">
                                        <h4 className="font-semibold mb-3">Pilih Tingkat Kilap Chrome</h4>
                                        
                                        <div className="chrome-value-display">
                                            <div className="chrome-value-number">{chromeValue.toFixed(1)}</div>
                                            <div className="chrome-value-text">Nilai Chrome</div>
                                        </div>
                                        
                                        <input
                                            type="range"
                                            min="-10"
                                            max="10"
                                            step="0.1"
                                            value={chromeValue}
                                            onChange={(e) => setChromeValue(parseFloat(e.target.value))}
                                            className="chrome-slider"
                                            disabled={isChromeBodyProcessing}
                                        />
                                        
                                        <div className="flex justify-between text-sm text-gray-500 mt-1">
                                            <span>-10 (Sangat Gelap)</span>
                                            <span>0 (Normal)</span>
                                            <span>+10 (Sangat Mengkilap)</span>
                                        </div>
                                    </div>
                                    
                                    <div className="mb-4">
                                        <h4 className="font-semibold mb-3">Pilih Opsi Chrome</h4>
                                        
                                        <div className="chrome-options">
                                            <div className={`chrome-option ${selectedChromeOption === 'both' ? 'selected' : ''}`} onClick={() => setSelectedChromeOption('both')}>
                                                <div className="chrome-icon">
                                                    <i className="fas fa-arrows-alt-h"></i>
                                                </div>
                                                <div className="chrome-name">Chrome 1 & 2</div>
                                            </div>
                                            <div className={`chrome-option ${selectedChromeOption === 'first' ? 'selected' : ''}`} onClick={() => setSelectedChromeOption('first')}>
                                                <div className="chrome-icon">
                                                    <i className="fas fa-arrow-right"></i>
                                                </div>
                                                <div className="chrome-name">Chrome 1 Saja</div>
                                            </div>
                                            <div className={`chrome-option ${selectedChromeOption === 'second' ? 'selected' : ''}`} onClick={() => setSelectedChromeOption('second')}>
                                                <div className="chrome-icon">
                                                    <i className="fas fa-arrow-left"></i>
                                                </div>
                                                <div className="chrome-name">Chrome 2 Saja</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="param-row">
                                        <div className="param-col">
                                            <div className="param-group">
                                                <label htmlFor="chromeIndex1">Indeks Chrome 1</label>
                                                <input
                                                    type="number"
                                                    id="chromeIndex1"
                                                    value={chromeIndex1}
                                                    onChange={(e) => setChromeIndex1(parseInt(e.target.value))}
                                                    className="form-input"
                                                    min="0"
                                                    max="50"
                                                    disabled={isChromeBodyProcessing}
                                                />
                                            </div>
                                        </div>
                                        <div className="param-col">
                                            <div className="param-group">
                                                <label htmlFor="chromeIndex2">Indeks Chrome 2</label>
                                                <input
                                                    type="number"
                                                    id="chromeIndex2"
                                                    value={chromeIndex2}
                                                    onChange={(e) => setChromeIndex2(parseInt(e.target.value))}
                                                    className="form-input"
                                                    min="0"
                                                    max="50"
                                                    disabled={isChromeBodyProcessing}
                                                />
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="flex justify-end mt-4">
                                        <button 
                                            className="mr-2 px-4 py-2 border border-gray-300 rounded-md"
                                            onClick={() => setShowChromeBodyModal(false)}
                                            disabled={isChromeBodyProcessing}
                                        >
                                            Batal
                                        </button>
                                        <button 
                                            className="px-4 py-2 bg-blue-600 text-white rounded-md"
                                            onClick={handleChromeBodySubmit}
                                            disabled={isChromeBodyProcessing}
                                        >
                                            {isChromeBodyProcessing ? 'Memproses...' : 'Terapkan Chrome Body'}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );

            const renderNotificationsPage = () => (
                <div>
                    <h2 className="page-title">Notifikasi</h2>
                    
                    <div className="bg-white rounded-lg shadow-md p-6">
                        <p className="text-gray-600 mb-4">Tidak ada notifikasi baru</p>
                        <p className="text-sm text-gray-500">Notifikasi akan muncul di sini ketika ada pembaruan atau pesan baru</p>
                    </div>
                </div>
            );

            const renderLoginPage = () => (
                <div>
                    <h2 className="page-title">Masuk</h2>
                    
                    <div className="bg-white rounded-lg shadow-md p-6">
                        <div className="flex flex-col items-center mb-6">
                            <div id="google-signin-button" className="google-signin-button mb-2" onClick={handleGoogleSignIn}>
                                {isGoogleSigningIn ? (
                                    <>
                                        <div className="loading-spinner"></div>
                                        <span>Menghubungkan...</span>
                                    </>
                                ) : (
                                    <>
                                        <i className="fab fa-google"></i>
                                        <span>Masuk dengan Google</span>
                                    </>
                                )}
                            </div>
                            {!googleApiLoaded && (
                                <p className="text-sm text-gray-500 mt-2">
                                    <i className="fas fa-spinner fa-spin mr-1"></i>
                                    Memuat layanan Google...
                                </p>
                            )}
                        </div>
                        
                        <div className="text-center text-gray-500 text-sm">
                            <p>Atau login dengan email dan password</p>
                        </div>
                        
                        <form onSubmit={handleSubmit} className="mt-6 space-y-4">
                            <div>
                                <label htmlFor="email" className="block text-sm font-medium text-gray-700 mb-1">
                                    Email
                                </label>
                                <input
                                    type="email"
                                    id="email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    required
                                />
                            </div>
                            
                            <div>
                                <label htmlFor="password" className="block text-sm font-medium text-gray-700 mb-1">
                                    Password
                                </label>
                                <input
                                    type="password"
                                    id="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    required
                                />
                            </div>
                            
                            <button
                                type="submit"
                                disabled={isLoading}
                                className="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
                            >
                                {isLoading ? 'Processing...' : 'Login'}
                            </button>
                        </form>
                        
                        {status && (
                            <div className="mt-4 p-3 bg-gray-100 rounded-md text-center">
                                {status}
                            </div>
                        )}
                    </div>
                </div>
            );

            const renderRegisterPage = () => (
                <div>
                    <h2 className="page-title">Daftar</h2>
                    
                    <div className="bg-white rounded-lg shadow-md p-6">
                        <p className="text-gray-600 mb-4">Halaman pendaftaran akan segera tersedia</p>
                        <p className="text-sm text-gray-500">Silakan login dengan Google untuk sementara waktu</p>
                    </div>
                </div>
            );

            const renderDashboardPage = () => (
                <div>
                    <h2 className="page-title">Dashboard</h2>
                    
                    <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                        <div className="flex items-center justify-center mb-4">
                            {user && user.imageUrl ? (
                                <img src={user.imageUrl} alt="Profile" className="w-20 h-20 rounded-full" />
                            ) : (
                                <div className="w-20 h-20 bg-gray-300 rounded-full flex items-center justify-center">
                                    <i className="fas fa-user text-gray-600 text-2xl"></i>
                                </div>
                            )}
                        </div>
                        <h3 className="text-xl font-semibold text-center mb-2">{user ? user.name : 'Pengguna'}</h3>
                        <p className="text-gray-600 text-center mb-4">{user ? user.email : ''}</p>
                        
                        <div className="bg-blue-50 rounded-lg p-4 mb-4">
                            <p className="text-sm text-gray-600 mb-1">Saldo Anda</p>
                            <p className="text-2xl font-bold text-blue-600">{CURRENCY} {userBalance.toLocaleString('id-ID')}</p>
                        </div>
                        
                        <div className="grid grid-cols-2 gap-4">
                            <button 
                                onClick={handlePaymentClick}
                                className="bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-md transition duration-200"
                            >
                                <i className="fas fa-plus-circle mr-2"></i>
                                Top Up
                            </button>
                            <button 
                                onClick={() => {
                                    fetchUserTransactions(token);
                                    setCurrentPage('transactions');
                                }}
                                className="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition duration-200"
                            >
                                <i className="fas fa-history mr-2"></i>
                                Riwayat
                            </button>
                        </div>
                        
                        <button 
                            onClick={handleSignOut}
                            className="w-full mt-4 bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition duration-200"
                        >
                            <i className="fas fa-sign-out-alt mr-2"></i>
                            Keluar
                        </button>
                    </div>
                    
                    <div className="bg-white rounded-lg shadow-md p-6">
                        <h3 className="text-lg font-semibold mb-4">Fitur Tersedia</h3>
                        
                        <div className="space-y-3">
                            <div className={`flex items-center justify-between p-3 rounded-lg ${userBalance >= MIN_BALANCE_FOR_CPM ? 'bg-green-50' : 'bg-gray-50'}`}>
                                <div className="flex items-center">
                                    <i className="fas fa-gamepad text-blue-600 mr-3"></i>
                                    <span>CPM1</span>
                                </div>
                                <div>
                                    {userBalance >= MIN_BALANCE_FOR_CPM ? (
                                        <span className="text-green-600 text-sm">
                                            <i className="fas fa-check-circle mr-1"></i>
                                            Tersedia
                                        </span>
                                    ) : (
                                        <span className="text-gray-500 text-sm">
                                            <i className="fas fa-lock mr-1"></i>
                                            Minimal {CURRENCY} {MIN_BALANCE_FOR_CPM.toLocaleString('id-ID')}
                                        </span>
                                    )}
                                </div>
                            </div>
                            
                            <div className={`flex items-center justify-between p-3 rounded-lg ${userBalance >= MIN_BALANCE_FOR_CPM ? 'bg-green-50' : 'bg-gray-50'}`}>
                                <div className="flex items-center">
                                    <i className="fas fa-gamepad text-green-600 mr-3"></i>
                                    <span>CPM2</span>
                                </div>
                                <div>
                                    {userBalance >= MIN_BALANCE_FOR_CPM ? (
                                        <span className="text-green-600 text-sm">
                                            <i className="fas fa-check-circle mr-1"></i>
                                            Tersedia
                                        </span>
                                    ) : (
                                        <span className="text-gray-500 text-sm">
                                            <i className="fas fa-lock mr-1"></i>
                                            Minimal {CURRENCY} {MIN_BALANCE_FOR_CPM.toLocaleString('id-ID')}
                                        </span>
                                    )}
                                </div>
                            </div>
                            
                            <div className={`flex items-center justify-between p-3 rounded-lg ${userBalance >= UNLOCK_ALL_CARS_PRICE ? 'bg-green-50' : 'bg-gray-50'}`}>
                                <div className="flex items-center">
                                    <i className="fas fa-unlock-alt text-purple-600 mr-3"></i>
                                    <span>Unlock All Cars</span>
                                </div>
                                <div>
                                    {userBalance >= UNLOCK_ALL_CARS_PRICE ? (
                                        <span className="text-green-600 text-sm">
                                            <i className="fas fa-check-circle mr-1"></i>
                                            Tersedia
                                        </span>
                                    ) : (
                                        <span className="text-gray-500 text-sm">
                                            <i className="fas fa-lock mr-1"></i>
                                            Minimal {CURRENCY} {UNLOCK_ALL_CARS_PRICE.toLocaleString('id-ID')}
                                        </span>
                                    )}
                                </div>
                            </div>

                            <div className={`flex items-center justify-between p-3 rounded-lg ${userBalance >= UNLOCK_POLICE_PRICE ? 'bg-green-50' : 'bg-gray-50'}`}>
                                <div className="flex items-center">
                                    <i className="fas fa-shield-alt text-red-600 mr-3"></i>
                                    <span>Unlock Police</span>
                                </div>
                                <div>
                                    {userBalance >= UNLOCK_POLICE_PRICE ? (
                                        <span className="text-green-600 text-sm">
                                            <i className="fas fa-check-circle mr-1"></i>
                                            Tersedia
                                        </span>
                                    ) : (
                                        <span className="text-gray-500 text-sm">
                                            <i className="fas fa-lock mr-1"></i>
                                            Minimal {CURRENCY} {UNLOCK_POLICE_PRICE.toLocaleString('id-ID')}
                                        </span>
                                    )}
                                </div>
                            </div>

                            <div className={`flex items-center justify-between p-3 rounded-lg ${userBalance >= COSTUME_ENGINE_PRICE ? 'bg-green-50' : 'bg-gray-50'}`}>
                                <div className="flex items-center">
                                    <i className="fas fa-cogs text-orange-600 mr-3"></i>
                                    <span>Costume Engine</span>
                                </div>
                                <div>
                                    {userBalance >= COSTUME_ENGINE_PRICE ? (
                                        <span className="text-green-600 text-sm">
                                            <i className="fas fa-check-circle mr-1"></i>
                                            Tersedia
                                        </span>
                                    ) : (
                                        <span className="text-gray-500 text-sm">
                                            <i className="fas fa-lock mr-1"></i>
                                            Minimal {CURRENCY} {COSTUME_ENGINE_PRICE.toLocaleString('id-ID')}
                                        </span>
                                    )}
                                </div>
                            </div>
                            
                            <div className={`flex items-center justify-between p-3 rounded-lg ${userBalance >= COSTUME_STEERING_PRICE ? 'bg-green-50' : 'bg-gray-50'}`}>
                                <div className="flex items-center">
                                    <i className="fas fa-sliders-h text-teal-600 mr-3"></i>
                                    <span>Costume Steering</span>
                                </div>
                                <div>
                                    {userBalance >= COSTUME_STEERING_PRICE ? (
                                        <span className="text-green-600 text-sm">
                                            <i className="fas fa-check-circle mr-1"></i>
                                            Tersedia
                                        </span>
                                    ) : (
                                        <span className="text-gray-500 text-sm">
                                            <i className="fas fa-lock mr-1"></i>
                                            Minimal {CURRENCY} {COSTUME_STEERING_PRICE.toLocaleString('id-ID')}
                                        </span>
                                    )}
                                </div>
                            </div>
                            
                            <div className={`flex items-center justify-between p-3 rounded-lg ${userBalance >= UNLOCK_BODYKIT_PRICE ? 'bg-green-50' : 'bg-gray-50'}`}>
                                <div className="flex items-center">
                                    <i className="fas fa-car-side text-indigo-600 mr-3"></i>
                                    <span>Unlock Body Kit</span>
                                </div>
                                <div>
                                    {userBalance >= UNLOCK_BODYKIT_PRICE ? (
                                        <span className="text-green-600 text-sm">
                                            <i className="fas fa-check-circle mr-1"></i>
                                            Tersedia
                                        </span>
                                    ) : (
                                        <span className="text-gray-500 text-sm">
                                            <i className="fas fa-lock mr-1"></i>
                                            Minimal {CURRENCY} {UNLOCK_BODYKIT_PRICE.toLocaleString('id-ID')}
                                        </span>
                                    )}
                                </div>
                            </div>
                            
                            <div className={`flex items-center justify-between p-3 rounded-lg ${userBalance >= CHROME_BODY_PRICE ? 'bg-green-50' : 'bg-gray-50'}`}>
                                <div className="flex items-center">
                                    <i className="fas fa-palette text-pink-600 mr-3"></i>
                                    <span>Chrome Body</span>
                                </div>
                                <div>
                                    {userBalance >= CHROME_BODY_PRICE ? (
                                        <span className="text-green-600 text-sm">
                                            <i className="fas fa-check-circle mr-1"></i>
                                            Tersedia
                                        </span>
                                    ) : (
                                        <span className="text-gray-500 text-sm">
                                            <i className="fas fa-lock mr-1"></i>
                                            Minimal {CURRENCY} {CHROME_BODY_PRICE.toLocaleString('id-ID')}
                                        </span>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const renderTransactionsPage = () => (
                <div>
                    <h2 className="page-title">Riwayat Transaksi</h2>
                    
                    <div className="bg-white rounded-lg shadow-md p-6">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-lg font-semibold">Semua Transaksi</h3>
                            <button 
                                onClick={() => fetchUserTransactions(token)}
                                className="refresh-button"
                                disabled={isLoadingTransactions}
                            >
                                {isLoadingTransactions ? (
                                    <i className="fas fa-spinner fa-spin"></i>
                                ) : (
                                    <i className="fas fa-sync-alt"></i>
                                )}
                            </button>
                        </div>
                        
                        {isLoadingTransactions ? (
                            <div className="text-center py-8">
                                <i className="fas fa-spinner fa-spin text-2xl text-blue-600"></i>
                                <p className="mt-2 text-gray-600">Memuat riwayat transaksi...</p>
                            </div>
                        ) : transactions.length > 0 ? (
                            <div className="space-y-0">
                                {transactions.map((transaction) => (
                                    <div key={transaction.id} className="transaction-item">
                                        <div>
                                            <p className="font-medium">{transaction.description}</p>
                                            <p className="text-sm text-gray-500">{new Date(transaction.created_at).toLocaleString('id-ID')}</p>
                                        </div>
                                        <div className={`transaction-amount ${transaction.type === 'topup' ? 'positive' : 'negative'}`}>
                                            {transaction.type === 'topup' ? '+' : '-'}{CURRENCY} {transaction.amount.toLocaleString('id-ID')}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        ) : (
                            <div className="text-center py-8">
                                <i className="fas fa-receipt text-3xl text-gray-300"></i>
                                <p className="mt-2 text-gray-500">Belum ada riwayat transaksi</p>
                                <p className="mt-2 text-sm text-gray-400">Transaksi Anda akan muncul di sini setelah melakukan top up atau menggunakan layanan</p>
                                <button 
                                    onClick={() => fetchUserTransactions(token)}
                                    className="mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-200"
                                >
                                    Refresh Transaksi
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );

            const renderCPMLoginPage = () => (
                <div>
                    <h2 className="page-title">
                        {cpmType === 'cpm1' ? 'CPM1' : 'CPM2'}
                    </h2>
                    
                    <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                        <p className="text-sm text-yellow-800">
                            <i className="fas fa-info-circle mr-2"></i>
                            Menggunakan layanan ini akan mengurangi saldo Anda sebesar {CURRENCY} {MIN_BALANCE_FOR_CPM.toLocaleString('id-ID')}
                        </p>
                    </div>
                    
                    <form onSubmit={handleSubmit} className="bg-white rounded-lg shadow-md p-6 space-y-4">
                        <div>
                            <label htmlFor="email" className="block text-sm font-medium text-gray-700 mb-1">
                                Email
                            </label>
                            <input
                                type="email"
                                id="email"
                                value={email}
                                onChange={(e) => setEmail(e.target.value)}
                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required
                            />
                        </div>
                        
                        <div>
                            <label htmlFor="password" className="block text-sm font-medium text-gray-700 mb-1">
                                Password
                            </label>
                            <input
                                type="password"
                                id="password"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required
                            />
                        </div>
                        
                        <button
                            type="submit"
                            disabled={isLoading}
                            className="buy-button w-full"
                        >
                            {isLoading ? 'Processing...' : 'BUY'}
                        </button>
                    </form>
                    
                    {status && (
                        <div className="mt-4 p-3 bg-gray-100 rounded-md text-center">
                            {status}
                        </div>
                    )}
                </div>
            );

            const renderPaymentPage = () => (
                <div>
                    <h2 className="page-title">Top Up Saldo</h2>
                    
                    <div className="bg-white p-4 rounded-lg shadow-md mb-6">
                        <h3 className="text-lg font-semibold mb-3 text-center">Scan QRIS untuk Pembayaran</h3>
                        <div className="payment-preview">
                            <img src="images/qris.jpg" alt="QRIS Payment" className="w-full rounded-md" />
                        </div>
                        <p className="text-sm text-gray-600 mt-3 text-center">
                            Scan kode QRIS di atas dengan aplikasi e-wallet Anda
                        </p>
                    </div>
                    
                    <form onSubmit={handlePaymentSubmit} className="bg-white rounded-lg shadow-md p-6 space-y-4">
                        <div>
                            <label htmlFor="paymentName" className="block text-sm font-medium text-gray-700 mb-1">
                                Nama Lengkap
                            </label>
                            <input
                                type="text"
                                id="paymentName"
                                value={paymentName}
                                onChange={(e) => setPaymentName(e.target.value)}
                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                required
                            />
                        </div>
                        
                        <div>
                            <label htmlFor="paymentWhatsApp" className="block text-sm font-medium text-gray-700 mb-1">
                                Nomor WhatsApp
                            </label>
                            <input
                                type="tel"
                                id="paymentWhatsApp"
                                value={paymentWhatsApp}
                                onChange={(e) => setPaymentWhatsApp(e.target.value)}
                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                required
                            />
                        </div>
                        
                        <div>
                            <label htmlFor="paymentEmail" className="block text-sm font-medium text-gray-700 mb-1">
                                Email
                            </label>
                            <input
                                type="email"
                                id="paymentEmail"
                                value={paymentEmail}
                                onChange={(e) => setPaymentEmail(e.target.value)}
                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                required
                            />
                        </div>
                        
                        <div>
                            <label htmlFor="paymentAmount" className="block text-sm font-medium text-gray-700 mb-1">
                                Jumlah Top-up
                            </label>
                            <select
                                id="paymentAmount"
                                value={paymentAmount}
                                onChange={(e) => setPaymentAmount(e.target.value)}
                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                required
                            >
                                <option value="">Pilih jumlah</option>
                                <option value="10000">{CURRENCY} 10.000</option>
                                <option value="25000">{CURRENCY} 25.000</option>
                                <option value="50000">{CURRENCY} 50.000</option>
                                <option value="100000">{CURRENCY} 100.000</option>
                                <option value="200000">{CURRENCY} 200.000</option>
                                <option value="500000">{CURRENCY} 500.000</option>
                            </select>
                        </div>
                        
                        <div>
                            <label htmlFor="paymentProof" className="block text-sm font-medium text-gray-700 mb-1">
                                Upload Bukti Pembayaran
                            </label>
                            <input
                                type="file"
                                id="paymentProof"
                                accept="image/*"
                                onChange={handlePaymentProofChange}
                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                required
                            />
                            {paymentProofPreview && (
                                <div className="mt-2">
                                    <img src={paymentProofPreview} alt="Payment Proof Preview" className="w-full h-48 object-cover rounded-md" />
                                </div>
                            )}
                        </div>
                        
                        <button
                            type="submit"
                            disabled={isLoading}
                            className="w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                            {isLoading ? 'Mengirim...' : 'Kirim Pembayaran'}
                        </button>
                    </form>
                    
                    {status && (
                        <div className="mt-4 p-3 bg-gray-100 rounded-md text-center">
                            {status}
                        </div>
                    )}
                </div>
            );

            return (
                <div className="min-h-screen flex flex-col">
                    {renderHeader()}
                    <div className="main-content flex-1">
                        {currentPage === 'home' ? renderHomePage() : 
                         currentPage === 'store' ? renderStorePage() :
                         currentPage === 'notifications' ? renderNotificationsPage() :
                         currentPage === 'login' ? renderLoginPage() :
                         currentPage === 'register' ? renderRegisterPage() :
                         currentPage === 'dashboard' ? renderDashboardPage() :
                         currentPage === 'transactions' ? renderTransactionsPage() :
                         currentPage === 'cpm-login' ? renderCPMLoginPage() : 
                         renderPaymentPage()}
                    </div>
                    {renderTabBar()}
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>